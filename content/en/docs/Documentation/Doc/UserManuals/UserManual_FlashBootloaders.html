---
title: UserManual_FlashBootloaders
linkTitle: UserManual_FlashBootloaders
weight: 46
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a>&#160;<br/>
&#160;&#160;&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<b>Flash Bootloader&#160;</b><br/>
User Manual&#160;<br/>
(Your First Steps)&#160;<br/>
&#160;<br/>
&#160;<br/>
Version 2.7&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
Vector Informatik GmbH, Ingerheimer Str. 24, 70499 Stuttgart&#160;<br/>
Tel. 0711/80670-0, Fax 0711/80670-399, Email can@vector-informatik.de&#160;<br/>
Internet http:\\www.vector-informatik.de&#160;<br/>
<hr/>
<a name=2></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-2_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-2_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-2_3.jpg"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-2_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-2_5.jpg"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
1&#160;/&#160;&#160;56<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
CAN<br/>
LIN<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<b>Authors:&#160;&#160;</b>Klaus Emmert&#160;<br/>
<b>Version:&#160;</b><br/>
2.7&#160;<br/>
<b>Status:&#160;</b><br/>
released &#160;(in preparation/completed/inspected/released)&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=3></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-3_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
2&#160;/&#160;&#160;56<br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Klaus Emmert&#160;<br/>
2004-07-09&#160;<br/>
2.2&#160;<br/>
Switch to new Layout Version 2.0&#160;<br/>
New symbols&#160;<br/>
Klaus Emmert&#160;<br/>
2004-02-09&#160;<br/>
2.3&#160;<br/>
Changes from&#160;Review&#160;Ra&#160;2004-<br/>09-20, link labels&#160;<br/>
Klaus Emmert&#160;<br/>
2005-03-23&#160;<br/>
2.4&#160;<br/>
Chapter 3.8 and warning for&#160;<br/>startup-codes added&#160;<br/>
Klaus Emmert&#160;<br/>
2006-02-06&#160;<br/>
2.5&#160;<br/>
Change of file structure&#160;<br/>
Klaus Emmert&#160;<br/>
2006-08-18&#160;<br/>
2.6&#160;<br/>
File Structure&#160;illustration&#160;<br/>
Klaus Emmert&#160;<br/>
2006-09-01&#160;<br/>
2.7&#160;<br/>
WDtimer and some minor issues&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=4></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-4_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-4_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
3&#160;/&#160;&#160;56<br/>
<b>Motivation For This Work&#160;</b><br/>
After a seemingly almost endlessly long&#160;development process, the software is&#160;<br/>finally&#160;finished and ready for the ECU,&#160;downloaded one last time,&#160;tested and the&#160;<br/>ECUs packaged for express delivery the next day. &#160;<br/>Now it‘s 10:00 P.M.&#160;<br/>
A short&#160;story&#160;<br/>
Shortly before quitting time the next business day the telephone rings, and what is&#160;<br/>
about flashing<br/>
on the display makes your forehead break out&#160;in a sweat of alarm! &#160;Errors, nothing&#160;<br/>is working,&#160;says the message from your&#160;customer. You hastily&#160;start up another&#160;<br/>ECU in the lab and you have to also observe&#160;the same result just reported to you.&#160;<br/>After searching for a little while you realize&#160;that the error is in version management.&#160;<br/>You put the correct version together, recompile it, briefly test the result and send&#160;<br/>the hex code to your&#160;customer, who can now flash&#160;the new functioning software via&#160;<br/>CAN and diagnostics onto the ECU and as&#160;a&#160;result, can proceed with the planned&#160;<br/>tests without substantial delays.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
<b>WARNING&#160;</b><br/>
<b>All application code in any&#160;of the&#160;Vector User Manuals is for training&#160;<br/>purposes only.&#160;They are slightly&#160;tested and designed to understand the basic&#160;<br/>idea of using a certain component or a set of components.&#160;</b><br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=5></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-5_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
4&#160;/&#160;&#160;56<br/>
<b>Contents</b>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#8"><b>1</b>&#160;&#160;<b>Welcome to the Flash Bootloader User Manual&#160;.............................................&#160;7</b>&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#8">1.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#8">Beginners with Flash Bootloader start here ?&#160;.....................................&#160;7&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#8">1.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#8">For Advanced Users&#160;...........................................................................&#160;7&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#8">1.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#8">Special topics&#160;......................................................................................&#160;7&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#9">1.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#9">Documents this one refers to…...........................................................&#160;8&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#10"><b>2</b>&#160;&#160;<b>About This Document&#160;.......................................................................................&#160;9</b>&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#10">2.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#10">How This Documentation Is Set-Up&#160;....................................................&#160;9&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#11">2.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#11">Legend and&#160;Explanation of Symbols.................................................&#160;10&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#12"><b>3</b>&#160;&#160;<b>Flashing – An Overall&#160;View&#160;............................................................................&#160;11</b>&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#12">3.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#12">What Is Flashing?&#160;.............................................................................&#160;11&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#13">3.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#13">What Happens During Flashing?&#160;......................................................&#160;12&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#13">3.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#13">What Is The&#160;Flash Bootloader?.........................................................&#160;12&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#13">3.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#13">Bootloader.........................................................................................&#160;12&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#14">3.5&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#14">Flash Driver.......................................................................................&#160;13&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#15">3.6&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#15">Flash Tool&#160;.........................................................................................&#160;14&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#16">3.7&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#16">What The Flash Bootloader Does&#160;.....................................................&#160;15&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#16">3.8&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#16">What The Flash Bootloader NOT Does&#160;............................................&#160;15&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#17"><b>4</b>&#160;&#160;<b>Flashing – A More&#160;Detailed View&#160;...................................................................&#160;16</b>&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#17">4.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#17">The Bootloader Is Always Started First.............................................&#160;16&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#17">4.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#17">Flashing After A Reset&#160;......................................................................&#160;16&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#18">4.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#18">Your Application Initiates The Flashing Process...............................&#160;17&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#18">4.3.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#18">What might happen?&#160;.........................................................................&#160;17&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">4.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">Handling of&#160;the Validation Concepts&#160;.................................................&#160;18&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">4.4.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">Validation Area..................................................................................&#160;18&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">4.4.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">Access to the Validation&#160;Area&#160;...........................................................&#160;18&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">4.4.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">ApplFblIsValidApp.............................................................................&#160;18&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">4.4.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">ApplFblValidateApp...........................................................................&#160;18&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">4.4.5&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#19">ApplFblInvalidateApp&#160;........................................................................&#160;18&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#20">4.5&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#20">Proposals For Handling The Validation Area&#160;....................................&#160;19&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#20">4.5.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#20">Proposal A.........................................................................................&#160;19&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#21">4.5.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#21">Proposal B.........................................................................................&#160;20&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#23">4.5.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#23">Proposal C&#160;........................................................................................&#160;22&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#24">4.6&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#24">The Interrupt Vector Tables&#160;..............................................................&#160;23&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#25">4.7&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#25">Label Reference File&#160;.........................................................................&#160;24&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#26"><b>5</b>&#160;&#160;<b>FLASHING&#160;IN 5 STEPS....................................................................................&#160;25</b>&#160;</a><br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=6></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-6_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
5&#160;/&#160;&#160;56<br/>
<a href="UserManual_FlashBootloaders.html#27">5.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#27">STEP 1 Design The Memory Layout.................................................&#160;26&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#28">5.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#28">STEP 2 Write A Test Application&#160;......................................................&#160;27&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#29">5.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#29">STEP 3 Integrate The Bootloader&#160;.....................................................&#160;28&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#30">5.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#30">STEP 4 Adapt Your Test Application&#160;For The Tester&#160;.......................&#160;29&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#30">5.5&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#30">STEP 5 Download Your Test Application With The Tester&#160;...............&#160;29&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#31"><b>6</b>&#160;&#160;<b>&#160;Details of Bootloader Integration Step (STEP 3)&#160;.........................................&#160;30</b>&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#32">6.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#32">Bootloader STEP 1 – Extract the files to a folder&#160;on your pc&#160;............&#160;31&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#35">6.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#35">Bootloader STEP 2 Adjust the marked files to fit&#160;your&#160;<br/>application&#160;.........................................................................................&#160;34&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#35">6.2.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#35">Make… Makefile and make.exe........................................................&#160;34&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#35">6.2.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#35">fbl_cfg.h - The Configuration File For The Flash&#160;Bootloader&#160;............&#160;34&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#37">6.2.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#37">FBL_apxx.C&#160;......................................................................................&#160;36&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#43">6.2.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#43">Fbl_vect.c /&#160;Applvect.c(.h) - The Interrupt Vector Tables..................&#160;42&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">6.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 3 Now compile the Flash Bootloader....................&#160;44&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">6.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 4 Transfer the Bootloader to the target&#160;<br/>hardware&#160;...........................................................................................&#160;44&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">6.5&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 5 Use&#160;the Flash Tool to Test the Bootloader........&#160;44&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">6.6&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 6 – Test the flashing after a reset.........................&#160;44&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#46">6.7&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#46">Bootloader Step 7 – Make your application ready for the&#160;<br/>transition to&#160;the Bootloader&#160;...............................................................&#160;45&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#46">6.8&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#46">Bootloader Step 8 – Start Bootloader from your&#160;application&#160;.............&#160;45&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#47"><b>7</b>&#160;&#160;<b>Background Information.................................................................................&#160;46</b>&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#47">7.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#47">The Watchdog...................................................................................&#160;46&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#50">7.1.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#50">Initializing The Watchdog&#160;..................................................................&#160;49&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#50">7.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#50">Multiple ECU Support........................................................................&#160;49&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#51">7.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#51">Validation Ok – Application Faulty&#160;....................................................&#160;50&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#52">7.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#52">FlashSegmentSize&#160;............................................................................&#160;51&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#52">7.4.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#52">Why Does The Tool Have To Know This Block Length?&#160;..................&#160;51&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#53">7.5&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#53">Frequently Asked Questions&#160;.............................................................&#160;52&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#53">7.5.1&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#53">Bootloader Crashes&#160;..........................................................................&#160;52&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#54">7.5.2&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#54">Application Is&#160;Not Started..................................................................&#160;53&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#55">7.5.3&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#55">Bootloader Is Not Started..................................................................&#160;54&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#55">7.5.4&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#55">The Flash Tool's Error Codes&#160;...........................................................&#160;54&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#56"><b>8</b>&#160;&#160;<b>Index&#160;...................................................................................................................&#160;2</b>&#160;</a><br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=7></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-7_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
6&#160;/&#160;&#160;56<br/>
<b>Illustrations</b>&#160;<br/><a href="UserManual_FlashBootloaders.html#9">Figure 1-1&#160;&#160;Manuals and References for the Flash Bootloader......................................&#160;8&#160;<br/></a><a href="UserManual_FlashBootloaders.html#12">Figure 3-1&#160;&#160;What Is Flashing&#160;........................................................................................&#160;11&#160;<br/></a><a href="UserManual_FlashBootloaders.html#13">Figure 3-2&#160;&#160;Bootloader, Flash Driver And Flash&#160;Tool Form The Flash Bootloader&#160;......&#160;12&#160;<br/></a><a href="UserManual_FlashBootloaders.html#14">Figure 3-3&#160;&#160;Bootloader And Your Application Never Run Simultaneously....................&#160;13&#160;<br/></a><a href="UserManual_FlashBootloaders.html#15">Figure 3-4&#160;&#160;Order And&#160;Way Of The&#160;Download Of The Software Components.............&#160;14&#160;<br/></a><a href="UserManual_FlashBootloaders.html#17">Figure 4-1&#160;&#160;Transition Between The Bootloader And Your Application And Vice&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#17">Versa..........................................................................................................&#160;16&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#20">Figure 4-2&#160;&#160;Using A Flag Only In The Validation&#160;Area..................................................&#160;19&#160;<br/></a><a href="UserManual_FlashBootloaders.html#21">Figure 4-3&#160;&#160;Separate Your Application Into Several Modules.......................................&#160;20&#160;<br/></a><a href="UserManual_FlashBootloaders.html#23">Figure 4-4&#160;&#160;Using A Validation Function For Validation Your Application.....................&#160;22&#160;<br/></a><a href="UserManual_FlashBootloaders.html#24">Figure 4-5&#160;&#160;Principle Of&#160;The Two Interrupt Vector Tables&#160;............................................&#160;23&#160;<br/></a><a href="UserManual_FlashBootloaders.html#27">Figure 5-1&#160;&#160;Basic Memory Layout&#160;Of&#160;An Application with the Flash Bootloader&#160;..........&#160;26&#160;<br/></a><a href="UserManual_FlashBootloaders.html#28">Figure 5-2&#160;&#160;The Test Application&#160;In&#160;The ECU&#160;Memory&#160;Using Two Interrupt Vector&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#28">Tables&#160;........................................................................................................&#160;27&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#29">Figure 5-3&#160;&#160;Flashing via&#160;Flash Tool&#160;and OEM-specific Tester......................................&#160;28&#160;<br/></a><a href="UserManual_FlashBootloaders.html#31">Figure 6-1&#160;&#160;Details of Bootloader Integration Step (Step 3)..........................................&#160;30&#160;<br/></a><a href="UserManual_FlashBootloaders.html#38">Figure 6-2&#160;&#160;Function Calling Sequence During Flashing&#160;..............................................&#160;37&#160;<br/></a><a href="UserManual_FlashBootloaders.html#43">Figure 6-3&#160;&#160;Situation Directly After The Programming Of The&#160;Bootloader Together&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#43">With The Dummy Application Vector&#160;Table&#160;...............................................&#160;42&#160;</a><br/>
<a href="UserManual_FlashBootloaders.html#47">Figure 7-1&#160;&#160;Memory Layout Of The Watchdog Trigger Functions&#160;................................&#160;46&#160;<br/></a><a href="UserManual_FlashBootloaders.html#49">Figure 7-2&#160;&#160;Functions For Manipulating The Watchdog&#160;...............................................&#160;48&#160;<br/></a><a href="UserManual_FlashBootloaders.html#51">Figure 7-3&#160;&#160;Modified Function Calling Sequence..........................................................&#160;50&#160;<br/></a><a href="UserManual_FlashBootloaders.html#52">Figure 7-4&#160;&#160;Segmenting During Flashing......................................................................&#160;51&#160;<br/></a>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=8></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-8_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
7&#160;/&#160;&#160;56<br/>
<b>1&#160;&#160;Welcome to the Flash Bootloader User Manual&#160;</b><br/>
Chapter 3.1<br/>
Chapter 3.3&#160;<br/>
<b>1.1&#160;</b><br/>
<b>Beginners with Flash Bootloader start here ? &#160;</b><br/>
You need s<a href="UserManual_FlashBootloaders.html#10">ome&#160;information</a>&#160;about&#160;this document? &#160;&#160;<br/>
Chapter 2<br/>
<a href="UserManual_FlashBootloaders.html#12">What is&#160;Flashing?&#160;<br/></a>What is the<a href="UserManual_FlashBootloaders.html#13">&#160;Flash Bootloader</a>?&#160;<br/>&#160;<br/>
Chapter 4&#160;<br/>
<b>1.2&#160;</b><br/>
<b>For Advanced Users &#160;</b><br/>
Chapter 5&#160;<br/>
<a href="UserManual_FlashBootloaders.html#17">Start reading&#160;here</a>.&#160;<br/><a href="UserManual_FlashBootloaders.html#27">5 Steps</a>&#160;for Flash Bootloader integration.&#160;<br/>&#160;&#160;&#160;<br/>
<b>1.3&#160;</b><br/>
<b>Special topics &#160;</b><br/>
<a href="UserManual_FlashBootloaders.html#25">Why do I need 2&#160;Interrupt Vector Tables</a>?&#160;<br/>
Chapter 4.6&#160;<br/>
<a href="UserManual_FlashBootloaders.html#19">How to define my&#160;application valid</a>? &#160;<br/>
Chapter 4.4&#160;<br/>
<a href="UserManual_FlashBootloaders.html#52">Validation Ok</a>&#160;but application not valid…&#160;<br/>
Chapter 7.3&#160;<br/>
<a href="UserManual_FlashBootloaders.html#48">How to handle my&#160;watchdog</a>? &#160;<br/>
Chapter 7.1&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=9></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-9_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-9_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-9_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-9_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-9_5.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
8&#160;/&#160;&#160;56<br/>
<b>1.4&#160;</b><br/>
<b>Documents this one refers to…&#160;</b><br/>
&#160;&#160;FlashTool Documentation&#160;<br/>
&#160;&#160;OEM-specific Documentation&#160;<br/>
&#160;&#160;Hardware-specific Documentation&#160;<br/>
&#160;<br/>
<b>User&#160;Manual</b><br/>
<b>You&#160;are here</b><br/>
headline<br/>
headline<br/>
#hw_&lt;xxx&gt;<br/>
#oem_&lt;yyy&gt;<br/>
<b>Technical</b><br/>
<b>Flash Tool</b><br/>
<b>Technical</b><br/>
<b>Reference</b><br/>
<b>Documentation</b><br/>
<b>Reference</b><br/>
<b>Hardware</b><br/>
<b>OEM</b><br/>
&#160;<br/>
Figure 1-1&#160;&#160;Manuals and References&#160;for the&#160;Flash Bootloader&#160;<br/>
The Flash Bootloader can be separated into&#160;a general part, that is equal to all&#160;<br/>Flash Bootloaders and parts&#160;that are dependent&#160;on the requirements of the OEM&#160;<br/>and the features of the hardware. All common topics are described within this user&#160;<br/>manual. Use the references when indicated&#160;to figure out the specifics for your&#160;<br/>Flash Bootloader.&#160;<br/>For the OEM-specifics of your Flash Bootloader refer to the:&#160;<br/><b>TechnicalReference_FBL_&lt;OEM&gt;.pdf</b>. The ID for a reference to this document&#160;<br/>looks like:&#160;<b>[#oem_&lt;xxx&gt;].&#160;</b>This ID you will find in the corresponding headline there.&#160;<br/>For the hardware-specifics of your&#160;Flash Bootloader refer to the :&#160;<br/><b>TechnicalReference_FBL_&lt;hardware&gt;.pdf</b>. The ID for a reference to this&#160;<br/>document looks like:&#160;<b>[#hw_&lt;yyy&gt;].&#160;</b>This ID you will find in the corresponding headline&#160;<br/>there.<br/>&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=10></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-10_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-10_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
9&#160;/&#160;&#160;56<br/>
<b>2&#160;&#160;About This Document&#160;</b><br/>
This document gives you&#160;an understanding of the Flash Bootloader. You will&#160;<br/>receive general information, a step-by-step&#160;tutorial to get the&#160;Flash Bootloader up&#160;<br/>and running, details regarding diagnostic services, directions to implement the&#160;<br/>watchdog, and instructions regarding the Flash Tool.&#160;<br/>
This is the&#160;general Flash&#160;Bootloader&#160;Document, independent of oem-specific settings&#160;<br/>or hardware. For more information about OEM&#160;solutions or&#160;hardware dependencies&#160;<br/>refer to those specific documents.&#160;<br/>
&#160;<br/>
<b>2.1&#160;</b><br/>
<b>How&#160;This&#160;Documentation Is Set-Up&#160;</b><br/>
<b>Chapter&#160;</b><br/>
<b>Content&#160;</b><br/>
<b>Chapter 1&#160;</b><br/>
The welcome&#160;page allows easy navigation throughout&#160;the document.<b>&#160;</b><br/>
<b>Chapter 2</b>&#160;<br/>
Contains&#160;some formal information about this&#160;document, and&#160;explanation of legends&#160;<br/>and symbols.&#160;<br/>
<b>Chapter 3</b>&#160;<br/>
Provides&#160;a brief introduction to flashing&#160;and the different parts&#160;that make up&#160;the&#160;Flash&#160;<br/>Bootloader.&#160;<br/>
<b>Chapter 4</b>&#160;<br/>
Provides&#160;details about the flash process,&#160;states the validation&#160;concept, and the&#160;<br/>implementation of the two interrupt vector tables.&#160;<br/>
<b>Chapter 5</b>&#160;<br/>
Describes the five basic&#160;steps to&#160;integrate the&#160;Flash&#160;Bootloader,&#160;and&#160;download&#160;the&#160;<br/>application using the Vector&#160;Flash Tool.&#160;<br/>
<b>Chapter 6</b>&#160;<br/>
Describes how to download the application using the&#160;OEM-Specific flash tool.&#160;<br/>
<b>Chapter 7</b>&#160;<br/>
Lists some&#160;common&#160;problems&#160;encountered&#160;while integrating the&#160;bootloader and their&#160;<br/>proper solution.&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=11></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_5.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_6.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_7.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_8.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_9.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-11_10.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
10&#160;/ 56<br/>
<b>2.2&#160;</b><br/>
<b>Legend and Explanation of Symbols&#160;</b><br/>
You find these symbols at the right side&#160;of the document. They indicate special&#160;<br/>areas in the text. Here is&#160;a list of their meaning.&#160;<br/>
These areas&#160;<br/>to&#160;the&#160;right of&#160;<br/>
<b>Symbol&#160;</b><br/>
<b>Meaning&#160;</b><br/>
the text&#160;<br/>contain brief&#160;<br/>items of&#160;<br/>
The building&#160;bricks mark examples.&#160;<br/>
information&#160;<br/>that will&#160;<br/>
&#160;<br/>
facilitate&#160;your&#160;<br/>search for&#160;<br/>
Comm&#160;&#160;<br/>
ents&#160;<br/>
You will find key words and information in&#160;short sentences in the margin. This&#160;will&#160;<br/>
and&#160;<br/>
specific&#160;<br/>
explanation<br/>
greatly simplify your search&#160;for topics.&#160;<br/>
topics.&#160;<br/>
The footprints will lead you&#160;through the steps until you can use the described Flash&#160;<br/>Bootloader.&#160;<br/>
&#160;<br/>
There is something you should take care about.&#160;<br/>
&#160;<br/>
Useful and additional information is displayed in areas&#160;with this&#160;symbol.&#160;<br/>
&#160;<br/>
This file you are allowed to edit on demand.&#160;<br/>
&#160;<br/>
This file you must not edit&#160;at all. &#160;<br/>
&#160;<br/>
This indicates an area dealing with frequently asked questions (FAQ).&#160;<br/>
&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=12></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-12_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
11&#160;/ 56<br/>
<b>3&#160;&#160;Flashing –&#160;An Overall View&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>What Is Flashing?&#160;</b><br/>
During the flashing process an application (or&#160;a part of it), which must be available&#160;<br/>in hex format (using the Flash Tool), is&#160;transferred into the ECU‘s memory. This&#160;<br/>
The Flash&#160;<br/>
transfer is done via a bus protocol&#160;like CAN, LIN, FlexRay, etc. &#160;<br/>
Bootloader&#160;<br/>downloads&#160;<br/>the&#160;<br/>
&#160;<br/>
application as&#160;<br/>a hex&#160;file&#160;to&#160;<br/>the ECU&#160;via&#160;<br/>
<b>Memory&#160;Map</b><br/>
CAN.&#160;<br/>
<b>&#160;y</b><br/>
flashing<br/>
Application<br/>
<b>Application.hex</b><br/>
[CAN, LIN,&#160;FlexRay,&#160;...]<br/>
<b>.bin</b><br/>
<b>&#160;m &#160;o &#160;r&#160;<br/>&#160; e&#160;</b><br/>
<b>.mot</b><br/>
<b>&#160;M</b><br/>
<b>...</b><br/>
<b>&#160;s &#160;h &#160;&#160;<br/>&#160; a&#160;</b><br/>
<br/>
<b>F &#160;l</b><br/>
<b>&#160; M<br/>&#160;A<br/>R&#160;</b><br/>
<b>y<br/>&#160;r&#160;</b><br/>
<b>&#160;m o<br/>&#160;e</b><br/>
<b>s h &#160;M</b><br/>
<b>F l a&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure 3-1&#160;&#160;What Is Flashing&#160;<br/>
PC or Laptop,&#160;<br/>CAN Card&#160;<br/>and the&#160;Flash&#160;<br/>
&#160;<br/>
Tool –&#160;this&#160;is&#160;<br/>all you need&#160;<br/>
To transfer your application to the target platform you simply need the Flash&#160;<br/>
for flashing.&#160;<br/>
Bootloader, &#160;a PC or&#160;a laptop, a CAN card and the Flash Tool. &#160;<br/>Using an emulator, a BDM tool, or the like&#160;to perform the flashing in an already&#160;<br/>built-in ECU would be expensive.&#160;In addition, the ECU’s hardware interface for the&#160;<br/>BDM or emulator is not always accessible.&#160;<br/>The interface is based on a CAN bus&#160;as&#160;part of the Physical Layer, the Transport&#160;<br/>Protocol, and on KWP2000 for the specification of diagnostic services. &#160;<br/>For flash data exchange between your&#160;new node and the tool you need two CAN&#160;<br/>messages, one for request and one for response.&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=13></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-13_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
12&#160;/ 56<br/>
<b>3.2&#160;</b><br/>
<b>What Happens During Flashing?&#160;</b><br/>
The Flash Driver (flash algorithms) is downloaded via the&#160;bus protocol. Afterwards&#160;<br/>the application is downloaded&#160;and written (flashed) into the Flash Memory (using&#160;<br/>the Flash Driver).&#160;<br/>
<b>3.3&#160;</b><br/>
<b>What Is The Flash Bootloader?&#160;</b><br/>
The Flash Bootloader is a combination of embedded software and PC tool,&#160;<br/>designed to do the flashing of the ECU software via a bus protocol (e.g. CAN).&#160;<br/>Therefore the Flash Bootloader is divided up into 3 parts, the Bootloader, the Flash&#160;<br/>Driver and the Flash Tool.&#160;<br/>
The&#160;<b>Flashtool&#160;</b>is&#160;an&#160;easy&#160;to&#160;use&#160;PC&#160;tool&#160;<br/>and&#160;controls&#160;the download of&#160;your&#160;<br/>application (as&#160;executable)<br/>
<b>&#160;&#160;y</b><br/>
via&#160;a&#160;PC card,&#160;e.g.&#160;CANcardXL&#160;or CAN-<br/>
<b>&#160; o &#160;r</b><br/>
The&#160;<b>Flash&#160;Driver&#160;</b>downloads the&#160;<br/>
<b>m</b><br/>
Application<br/>
AC2-PCI.&#160;<br/>
executable&#160;via CAN/LIN&#160;in&#160;<br/>connection&#160;with the Flashtool.&#160;<br/>
<b>&#160; &#160; M &#160;e &#160;<br/>h</b><br/>
<b>&#160; s &#160;</b><br/>
Interrupt&#160;Vector&#160;Table<br/>
[Application]<br/>
<b>F &#160;l &#160;a</b><br/>
<b>&#160;&#160;M</b><br/>
Flash Driver<br/>
<b>R &#160;A</b><br/>
Flash&#160;Programming<br/>
<b>&#160;r&#160;y</b><br/>
CAN<i>fbl</i><br/>
Bootloader<br/>
<b>&#160;e m o</b><br/>
CAN<br/>
LIN<br/>
<b>&#160;&#160;M</b><br/>
<br/>
<b>&#160;s h</b><br/>
Flash<br/>
Interrupt&#160;Vector&#160;Table<br/>
<b>F l a</b><br/>
Tool<br/>
[FBL]<br/>
The&#160;<b>Bootloader&#160;</b>contains basic&#160;CAN&#160;<br/>communication,&#160;a&#160;Transport&#160;Protocol and&#160;<br/>Diagnostics (KWP2000),&#160;both code&#160;optimized&#160;<br/>to&#160;use&#160;minimum&#160;memory.<br/>
&#160;<br/>
Figure 3-2&#160;&#160;Bootloader, Flash Driver And Flash Tool Form&#160;The Flash Bootloader&#160;<br/>
<b>3.4 Bootloader&#160;<br/></b>The Bootloader is&#160;a stand-alone program. It is compiled,&#160;linked, and downloaded to&#160;<br/>the ECU separately from your application.&#160;The Bootloader and your application&#160;<br/>never run simultaneously.&#160;<br/>The Bootloader uses Flash memory, in the&#160;protected area of the ECU. If your ECU&#160;<br/>does not support such a hardware protection,&#160;the Bootloader will protect itself from&#160;<br/>being overwritten. &#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=14></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-14_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-14_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
13&#160;/ 56<br/>
Application is&#160;running &#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160; &#160;Flash Bootloader is running<br/>
<b>Memory&#160;Map</b><br/>
<b>Memory&#160;Map</b><br/>
<b>y</b><br/>
<b>y</b><br/>
<b>r &#160;</b><br/>
<b>r &#160;</b><br/>
flashing<br/>
<b>&#160; o &#160;</b><br/>
<b>Application.hex</b><br/>
Application<br/>
<b>&#160; o &#160;</b><br/>
<b>e &#160;m</b><br/>
<b>e &#160;m</b><br/>
<b>&#160;M &#160;</b><br/>
<b>&#160;M &#160;</b><br/>
As the&#160;Bootloader&#160;<br/>downloads data&#160;<br/>
<b>&#160; h &#160;&#160;</b><br/>
<b>&#160; h &#160;&#160;</b><br/>
via CAN,&#160;it&#160;<br/>
<b>&#160;a &#160;s</b><br/>
<b>&#160;a &#160;s</b><br/>
contains a&#160;CAN&#160;<br/>Driver and a&#160;<br/>
<b>F &#160;l&#160;</b><br/>
<b>F &#160;l&#160;</b><br/>
Transport&#160;<br/>Protocol.&#160;<br/>
<b>&#160; M</b><br/>
Application<br/>
<b>&#160; M</b><br/>
<b>A</b><br/>
<b>Flash Driver</b><br/>
Data<br/>
<b>A</b><br/>
<b>R &#160;</b><br/>
<b>R &#160;</b><br/>
<b>y</b><br/>
<b>y</b><br/>
<b>&#160;r&#160;</b><br/>
<b>&#160;r&#160;</b><br/>
<b>&#160;o</b><br/>
<b>Bootloader</b><br/>
<b>&#160;o</b><br/>
<b>Bootloader</b><br/>
Transport&#160;Protocol,<br/>
Transport&#160;Protocol,<br/>
<b>&#160;e m</b><br/>
KWP2000-Services,<br/>
<b>&#160;e m</b><br/>
KWP2000-Services,<br/>
CAN Driver<br/>
CAN Driver<br/>
<b>&#160; M</b><br/>
<b>&#160; M</b><br/>
<b>h</b><br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>h</b><br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>&#160;l a s&#160;</b><br/>
<b>&#160;l a s&#160;</b><br/>
<b>F</b><br/>
<b>F</b><br/>
&#160;<br/>
Figure 3-3&#160;&#160;Bootloader And&#160;Your&#160;Application Never Run Simultaneously&#160;&#160;<br/>
The Bootloader is&#160;transferred to the target platform via a Flash programmer or&#160;<br/>burner, which is hardware dependent (It is not downloaded over CAN).&#160;<br/>
<b>3.5 Flash&#160;</b><br/>
<b>Driver&#160;</b><br/>
The Flash Driver (actual flash algorithm) is the hardware dependent code for&#160;<br/>
Reasons for&#160;<br/>Flash Driver to&#160;<br/>
performing the flash functions.&#160;<br/>
run in&#160;RAM:&#160;<br/>
Physical reasons&#160;<br/>
In most cases, programming flash memory from flash is&#160;not possible. Therefore the&#160;<br/>Flash Driver is downloaded and executed into RAM to allow programming of the&#160;<br/>
Protection&#160;<br/>against a faulty&#160;<br/>
application.&#160;<br/>
call&#160;deleting&#160;the&#160;<br/>flash &#160;<br/>
The advantage of downloading the flash algorithm into RAM is that updates to the&#160;<br/>
Save&#160;ROM&#160;<br/>
flash algorithms are possible without the need to reprogram the primary bootloader.&#160;<br/>
memory&#160;<br/>
The algorithm is cleared&#160;from RAM upon completion&#160;of the download to avoid&#160;<br/>
Easy&#160;to&#160;make&#160;<br/>updates.&#160;<br/>
accidental calls to the flash functions while in the application.&#160;<br/>
In special&#160;cases the&#160;flash algorithms are kept in flash&#160;memory and copied to RAM&#160;<br/>when needed. Of course the possibility of changing the flash&#160;algorithms is no longer&#160;<br/>available when this&#160;configuration is used. Moreover, there is a risk&#160;that the flash&#160;<br/>memory will&#160;be unintentionally erased from an accidental&#160;call to these&#160;functions.&#160;A&#160;<br/>remedy to&#160;correct this would be to encrypt the corresponding program code, such as&#160;<br/>e.g. an XOR or the like.&#160;&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=15></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-15_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-15_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
14&#160;/ 56<br/>
<b>3.6 Flash&#160;</b><br/>
<b>Tool&#160;</b><br/>
The Flash Tool is a Windows™&#160;based PC tool that controls the download of the&#160;<br/>application.&#160;&#160;<br/>The Flash Tool reads the compiled and linked application data (Motorola-S or Intel-<br/>Hex format), triggers and controls the flash process, transfers the data via the bus&#160;<br/>protocol (e.g. CAN) and verifies this process via a checksum.&#160;<br/>To do the download you additionally need a CAN card&#160;(CANcardXL, CAN AC2-<br/>PCI) to connect your hardware to the PC. &#160;<br/>&#160;<br/>The following figure shows the Bootloader, the Flash Driver, the application, and&#160;<br/>how they get in the memory of the controller. As the Bootloader is the component&#160;<br/>to enable the download of the Flash Driver and the application, it cannot be&#160;<br/>transferred by itself. This job must be done with a suitable programmer or burner&#160;<br/>(development environment). &#160;<br/>
<b>Memo</b><br/>
<b>Mem&#160;ry&#160;Map</b><br/>
<b>y<br/>&#160; r &#160;</b><br/>
Application<br/>
<b>&#160;&#160;e&#160;&#160;m &#160;o</b><br/>
CAN, LIN&#160;3<br/>
<b>&#160;&#160;&#160; M</b><br/>
FlexRay,&#160;...<br/>
<b>&#160;&#160;h<br/>&#160;&#160;s<br/>&#160; a<br/>&#160; l<br/>F</b><br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
<b>Application]</b><br/>
<b>Validation Area</b><br/>
2<br/>
CAN,&#160;LIN<br/>
<b>&#160; M<br/>A</b><br/>
<b>Flash Driver</b><br/>
FlexRay,&#160;...<br/>
<b>R &#160;</b><br/>
<b>&#160;y</b><br/>
<b>Bootloader</b><br/>
<b>&#160;m o r</b><br/>
Transport&#160;Protocol,<br/>
Programmer<br/>
<b>&#160;e</b><br/>
KWP2000-Services,<br/>
1<br/>
CAN&#160;Driver<br/>
Burner<br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>&#160;a s h &#160;M</b><br/>
<b>Interrupt Vector&#160;Table</b><br/>
<b>F l</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 3-4&#160;&#160;Order And Way&#160;Of The Download Of The Software Components&#160;<br/>
The numbers in the figure show the download order, Bootloader first, then the Flash&#160;<br/>Driver to be able to flash&#160;the application.&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=16></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-16_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
15&#160;/ 56<br/>
<b>3.7&#160;</b><br/>
<b>What The Flash Bootloader Does&#160;</b><br/>
&#160;&#160;Initializes the CAN controller &#160;<br/>
&#160;&#160;Sends diagnostic messages via CAN&#160;<br/>
&#160;&#160;Receives diagnostic messages via CAN&#160;<br/>
&#160;&#160;Erases and programs the flash memory&#160;<br/>
&#160;<br/>
<b>3.8&#160;</b><br/>
<b>What The Flash Bootloader NOT Does&#160;</b><br/>
It is no “Ready-to-use” program:&#160;<br/>
&#160;&#160;Adaptations of callback functions, startup / initialization is necessary&#160;<br/>
&#160;&#160;Adaptation to runtime&#160;environment and specific hardware requirements are&#160;<br/>
necessary&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=17></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-17_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-17_2.jpg"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-17_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
16&#160;/ 56<br/>
<b>4&#160;&#160;Flashing –&#160;A&#160;More Detailed View&#160;</b><br/>
<b>4.1&#160;</b><br/>
<b>The Bootloader Is Always&#160;Started First&#160;</b><br/>
The Flash&#160;<br/>Bootloader is&#160;<br/>called after a&#160;<br/>
As you now know, on the one hand the Bootloader resides in the protected area&#160;<br/>
reset or&#160;<br/>
and is always resident on the ECU. On the other hand it is not&#160;guaranteed that a&#160;<br/>
directly&#160;from&#160;<br/>your&#160;<br/>
valid, executable application is&#160;also present in the ECU.&#160;This is the reason why the&#160;<br/>
application.&#160;&#160;<br/>
Bootloader is always executed first after&#160;a reset. The decision is then made to start&#160;<br/>the application or to stay in the Bootloader.&#160;<br/>&#160;<br/>
&#160;<br/>
<b>Application</b>&#160;<br/>
<b>Bootloader</b>&#160;<br/>
<b>Application&#160;Valid?&#160;</b><br/>
yes&#160;<br/>
OEM&#160;specific<br/>
(ApplFblIsValidApp)<br/>
wait&#160;time<br/>
<b>Reset</b>&#160;<br/>
no&#160;<br/>
<b>Wait&#160;for&#160;Diagnostic&#160;Service&#160;<br/>to start&#160;Flash</b><br/>
<b>Invalidate Application?&#160;</b><br/>
(ApplFblInvalidateApp)<br/>
<b>Flash&#160;Process</b><br/>
<b>Validate&#160;Application?&#160;</b><br/>
(ApplFblValidateApp)<br/>
<b>Dependent on&#160;OEM</b><br/>
&#160;<br/>
Figure 4-1&#160;&#160;Transition Between The Bootloader&#160;And&#160;Your&#160;Application And Vice&#160;Versa&#160;<br/>
The Bootloader can be made to&#160;start in different ways, from your application and&#160;<br/>after a reset.&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Flashing After A Reset&#160;</b><br/>
The Flash Bootloader is executed always first after a reset. At this&#160;point in time the&#160;<br/>bootloader has to determine if&#160;a valid application has been&#160;flashed. This test is&#160;<br/>done through the use of the&#160;<b>ApplFblIsValidApp</b>&#160;function. &#160;<br/>
You will find some example strategies of how an application can be set to valid or&#160;<br/>invalid in ch<a href="UserManual_FlashBootloaders.html#20">apter&#160;4.5</a>.&#160;<br/>
The return value of the function&#160;<b>ApplFblIsValidApp&#160;&#160;</b><a href="UserManual_FlashBootloaders.html#17">&#160;(see&#160;Figure 4-1) is</a>&#160;used to&#160;<br/>decide whether the process should branch into the application or if the ECU should&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=18></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-18_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-18_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-18_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
17&#160;/ 56<br/>
remain in the Flash Bootloader. The code in this function and the way you decide&#160;<br/>whether the application is valid&#160;or not, is up to you. &#160;<br/>
After a&#160;reset&#160;<br/>
If the application area is blank or the code is faulty, the Bootloader waits for a&#160;<br/>
the&#160;<br/>
Diagnostic CAN message to start the flash process, i.e. the Flash Driver is loaded&#160;<br/>
<b>ApplFblIsVali<br/>dApp</b>&#160;function&#160;<br/>
into the ECU‘s RAM memory and started. Now the application is being&#160;<br/>
decides&#160;<br/>whether to&#160;<br/>
downloaded, which is the actual flash process.&#160;<br/>
branch&#160;into&#160;<br/>the&#160;<br/>
The application is connected to the Flash Bootloader via three functions&#160;<br/>
application.&#160;<br/>
<b>ApplFblIsValidApp</b>,&#160;&#160;<b>ApplFblValidateApp</b>&#160;and&#160;<b>ApplFblInvalidateApp.&#160;&#160;</b>These&#160;<br/>functions are to manipulate the Validation Area. &#160;<br/>The names of the functions ApplFblValidateApp and ApplFblInvalidateApp can&#160;<br/>vary slightly for some OEMs. Please refer to your OEM-specific Documentation for&#160;<br/>more detailed information&#160;<b>[#oem_valfunc</b>].&#160;<br/>
In the following, these&#160;three functions are abbreviated sometimes only with IsValid,&#160;<br/>Validate and Invalidate.&#160;These abbreviations&#160;are found in most of the following&#160;<br/>figures.&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Your Application Initiates The Flashing Process&#160;</b><br/>
The other way to start the flashing process&#160;is the one via your application and its&#160;<br/>diagnostics. &#160;<br/>Before the Flash Bootloader&#160;manipulates data in the&#160;application area the function&#160;<br/><b>ApplFblInvalidateApp</b>&#160;is called&#160;to set the Validation&#160;Area to invalid. Then the&#160;<br/>Flash Bootloader downloads&#160;the new application (the corresponding hex file) and&#160;<br/>executes a reset or&#160;starts the application directly (depending on the OEM&#160;<br/><b>[#oem_start]</b>). Before starting the&#160;application, the function&#160;<b>ApplFblValidateApp</b>&#160;<br/>validates the application again. &#160;<br/>
Before the beginning of&#160;flashing,&#160;the&#160;application&#160;must be set&#160;to invalid.&#160;This prevents&#160;&#160;<br/>starting a partially flashed application if the flash&#160;process failed or was interrupted. &#160;<br/>
<b>4.3.1&#160;&#160;What might happen?&#160;<br/></b>Imagine your validity check results in a valid application but it is&#160;actually faulty.&#160;<br/>Every reset leads in the application that&#160;is not working properly and the watchdog&#160;<br/>will provoke a reset again. Now the software is in an endless loop. &#160;<br/>In this case it is not possible to flash the application again. See an optional&#160;<br/>selectable solution to this problem in the chapter&#160;<a href="UserManual_FlashBootloaders.html#51">7.3&#160;&#160;</a>(<a href="UserManual_FlashBootloaders.html#52">Validation ok – Application&#160;<br/>Faulty</a>).&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=19></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-19_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-19_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-19_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
18&#160;/ 56<br/>
<b>4.4&#160;</b><br/>
<b>Handling of the Validation Concepts&#160;</b><br/>
The concept for the flash mechanism is designed to allow maximum flexibility as&#160;<br/>well as a very easy implementation. The main&#160;thing you have to take care for is to&#160;<br/>call the application only if&#160;there is a valid version flashed. The manner you&#160;<br/>recognize a valid version is up to you and realized in the so-called Validation Area. &#160;<br/>
<b>4.4.1 Validation&#160;Area&#160;<br/></b>In this area you can store the indicators&#160;for a valid application. This&#160;can be a simple&#160;<br/>flag that indicates valid or even code for checking validity of the application. In the&#160;<br/>latter case the&#160;<b>ApplFblIsValidApp&#160;</b>should check this function before calling it.&#160;<br/>
<b>4.4.2&#160;&#160;Access to the Validation Area&#160;<br/></b>The Bootloader provides 3 functions to&#160;access the validation area as mentioned&#160;<br/>just before. The functions reside in the&#160;Bootloader and the coding has to be done&#160;<br/>by you. The functions are: &#160;<br/>
<b>4.4.3 ApplFblIsValidApp&#160;<br/></b>This function checks the validity of the application. The return value decides about&#160;<br/><a href="UserManual_FlashBootloaders.html#17">the further actions (see&#160;Figure 4-1</a>). &#160;<br/>
Since this function is called on every Reset, it is recommended to simply&#160;check a&#160;flag&#160;<br/>previously set.&#160;This&#160;speeds up the restart time.&#160;<br/>
<b>4.4.4 ApplFblValidateApp&#160;</b><br/>
Use the&#160;<br/>
This function signs the application as valid by accessing the &#160;Validation Area&#160;<br/>
following&#160;<br/>proposals to&#160;<br/>
directly. After the flash process the function&#160;<b>ApplFblValidateApp</b>&#160;is called to check&#160;<br/>
get&#160;a&#160;little&#160;<br/>
the validity of the flashed application and to set the indicators (e.g. a Flag, a certain&#160;<br/>
comfortable&#160;<br/>with&#160;the&#160;<br/>
memory location etc.). The indicators are utilized on reset by the IsValid function.&#160;<br/>
possibilities of&#160;<br/>configuration&#160;<br/>arising&#160;with&#160;<br/>
<b>4.4.5 ApplFblInvalidateApp&#160;</b><br/>
this concept.&#160;<br/>
This function is called before erasing the flash memory. Herein&#160;you reset&#160;your&#160;<br/>indicators and mark the application as invalid in order&#160;to avoid the case where a&#160;<br/>possible reset or error while flashing occurs without invalidating&#160;the partially erased&#160;<br/>or programmed application.&#160;<br/>
The &#160;implementation of the validation function is application-specific, however, once&#160;a&#160;<br/>solution is implemented it cannot be changed unless the Bootloader is re-<br/>programmed.&#160;&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=20></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-20_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-20_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
19&#160;/ 56<br/>
<b>4.5&#160;</b><br/>
<b>Proposals For Handling The Validation Area&#160;</b><br/>
The following three examples are examples&#160;of how you can deal&#160;with the validation&#160;<br/>concept offered by the Flash Bootloader. Before starting to develop your own&#160;<br/>strategy based on the concepts mentioned here, please refer to the OEM-specific&#160;<br/>Documentation [<b>#oem_valid</b>] in case your OEM wants you to do this in a predefined&#160;<br/>manner.&#160;<br/>
<b>4.5.1 Proposal&#160;A&#160;<br/></b>In this concept the validation area is just&#160;a&#160;flag. This is&#160;the simplest way to realize&#160;<br/>the validation concept: &#160;<br/>
<b>Mem</b><br/>
<b>Me&#160;ory&#160;Map</b><br/>
<b>&#160;Ma</b><br/>
<b>y<br/>&#160; r &#160;</b><br/>
Application<br/>
<b>&#160;&#160;e&#160;&#160;m &#160;o</b><br/>
<b>&#160;&#160;&#160; M<br/>&#160;&#160;h<br/>&#160;&#160;s<br/>&#160; a<br/>&#160; l<br/>F</b><br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
<b>[Application]</b><br/>
<b>FLAG&#160; 0 invalid,&#160;1&#160;vaild</b><br/>
<b>&#160; M<br/>A</b><br/>
<b>Flash&#160;Driver</b><br/>
<b>R &#160;</b><br/>
<b>&#160;y</b><br/>
<b>Bootloader</b><br/>
<b>&#160;m o r</b><br/>
Transport&#160;Protocol,<br/>
<b>&#160;e</b><br/>
KWP2000-Services,<br/>
CAN&#160;Driver<br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>&#160;a s h &#160;M</b><br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
<b>F l</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 4-2&#160;&#160;Using A Flag Only&#160;In The Validation Area&#160;<br/>
The code in the IsValid function has to&#160;know the location of the flag in the&#160;<br/>Validation Area. After a reset, the content&#160;of this flag shows the validity&#160;of the&#160;<br/>application.&#160;If you start flashing via CAN the function “Invalidate” clears the flag&#160;<br/>before erasing. After flashing, the function&#160;“Validate”&#160;sets the flag. Then after a&#160;<br/>reset, the “IsValid” function recognizes&#160;the&#160;flag to be set and returns a positive&#160;<br/>value. The application is valid and can be executed. &#160;<br/>
If you can guarantee that the flag&#160;(or byte) is the first&#160;byte to be erased and the&#160;last&#160;<br/>byte to be written while programming, you&#160;may leave the Invalidate and Validate&#160;<br/>functions empty.&#160;&#160;<br/>
&#160;<br/>
Make sure that the valid indicator differs from the blank, non-existing flash contents.&#160;&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=21></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-21_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-21_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
20&#160;/ 56<br/>
<b>4.5.2&#160;&#160;Proposal B &#160;<br/></b>Based upon this concept you can separate&#160;the application into separate sections.&#160;<br/>See the figure below for the memory mapping. The&#160;parts of the application are&#160;<br/>named as&#160;<b>Module n</b>. Every module needs a Validation Area of its own. &#160;<br/>
<b>Memory&#160;Map</b><br/>
Appl Module 1<br/>
<b>y</b><br/>
Validation Area 1<br/>
Appl Module 2<br/>
<b>&#160; m &#160;o &#160;r &#160;</b><br/>
Validation Area 2<br/>
<b>&#160; e</b><br/>
Appl Module 3<br/>
<b>&#160;&#160;&#160; M<br/>h</b><br/>
Validation Area 3<br/>
<b>a &#160;s &#160;</b><br/>
<b>...</b><br/>
<b>Interrupt&#160;Vector Table</b><br/>
<b>F &#160;l &#160;</b><br/>
<b>[Application]</b><br/>
<b>Appl Module&#160;Table</b><br/>
Info&#160;about Validation&#160;Areas&#160;<br/>
Checkbyte<br/>
<b>&#160; M<br/>A</b><br/>
<b>Flash Driver</b><br/>
<b>R &#160;</b><br/>
<b>&#160;y<br/>&#160;r</b><br/>
<b>Bootloader</b><br/>
Transport&#160;Protocol,<br/>
KWP2000-Services,<br/>
CAN Driver<br/>
<b>&#160; M e m o</b><br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>Interrupt Vector&#160;Table</b><br/>
<b>&#160;l a s h<br/>F</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 4-3&#160;&#160;Separate&#160;Your&#160;Application Into Several Modules&#160;<br/>
To know the locations&#160;of the modules, their size and the location of their Validation&#160;<br/>Area you should add a Module Table. This table contains the latter information and&#160;<br/>enables the access to the single Validation Areas of the modules. The access is&#160;<br/>done via the known functions IsValid, Validate, and Invalidate.&#160;<br/>Before you use the Module Table, make sure this information is in the memory.&#160;<br/>Use e.g. a check byte to ensure this.&#160;<br/>
The location of this check byte depends on the order of erasing and writing to the&#160;<br/>flash memory. It should&#160;be erased as the first byte in this module table area and&#160;<br/>written only if the complete module table area is valid. &#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=22></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-22_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
21&#160;/ 56<br/>
&#160;<br/>
<b>4.5.2.1&#160;</b><br/>
<b>The Module Table&#160;</b><br/>
The file FBL_MTAB contains the flash-erase sector table (more about the interrupt&#160;<br/>vector tables in the following). Whenever the sector selectable erase service is&#160;<br/>called, the Bootloader&#160;scans this&#160;table to get the&#160;address and length information of&#160;<br/>the sector that&#160;has to be erased.&#160;<br/>The flash erase sector table is&#160;not required if the Bootloader configuration has&#160;<br/>been optimized for download of only one module.&#160;<br/>The location&#160;of FBL_MTAB provides great&#160;flexibility. It is possible to change the&#160;<br/>memory size of the modules, without modifications of the Bootloader. To extend&#160;<br/>the number of modules you can add&#160;more entries to the table.&#160;<br/>If it is not feasible or&#160;necessary to change&#160;the flash erase table,&#160;this table could&#160;<br/>also be compiled and linked into the protected area of the Bootloader. This has the&#160;<br/>advantage that this&#160;table cannot be erased. &#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=23></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-23_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
22&#160;/ 56<br/>
<b>4.5.3 Proposal&#160;C&#160;<br/></b>The last example uses a validation function&#160;instead of just flags as shown in the&#160;<br/>two examples above. &#160;<br/>This validation function resides&#160;in the application and is&#160;compiled and&#160;linked&#160;<br/>together with the application.&#160;Therefore you should take care before calling this&#160;<br/>function, that the code has been flashed correctly. For this demand you can use a&#160;<br/>check byte as shown in the Proposal B.&#160;<br/>
<b>Mem</b><br/>
<b>Me&#160;ory&#160;Map</b><br/>
<b>&#160;Ma</b><br/>
<b>y<br/>r &#160;</b><br/>
<b>...</b><br/>
<b>&#160;&#160;m &#160;o &#160;<br/>&#160; e<br/>M<br/>&#160;&#160; &#160;<br/>&#160;&#160;h<br/>&#160; s<br/>&#160;a<br/>&#160;&#160;l&#160;<br/>F</b><br/>
<b>Validation Function</b><br/>
<b>&#160;&#160;M<br/>A</b><br/>
<b>Flash Driver</b><br/>
<b>R &#160;</b><br/>
<b>&#160;y<br/>&#160;r<br/>&#160;o</b><br/>
<b>Bootloader</b><br/>
Transport&#160;Protocol,<br/>
<b>&#160;e&#160;m</b><br/>
KWP2000-Services,<br/>
CAN Driver<br/>
<b>&#160; M</b><br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>Interrupt Vector Table</b><br/>
<b>&#160;l a s h<br/>F</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 4-4&#160;&#160;Using A Validation Function For Validation&#160;Your Application&#160;<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=24></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-24_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
23&#160;/ 56<br/>
<b>4.6&#160;</b><br/>
<b>The Interrupt Vector Tables&#160;</b><br/>
The&#160;<br/>
Interrupts are handled in a special way for&#160;applications with Flash Bootloader. &#160;<br/>
application&#160;<br/>and Flash&#160;<br/>
When an application uses the Flash Bootloader it must be guaranteed that the&#160;<br/>
Bootloader&#160;<br/>each&#160;have&#160;<br/>
reset vector always&#160;points to the Flash Bootloader. After a reset the Flash&#160;<br/>
their&#160;own&#160;<br/>interrupt&#160;<br/>
Bootloader is started first. &#160;<br/>
vector table&#160;to&#160;<br/>use.&#160;<br/>
Usually the ECU vector table is part of the protected area of flash memory, but the&#160;<br/>reset vectors for the application interrupt&#160;service function addresses have to be&#160;<br/>changeable.&#160;<br/>The solution to this problem lies&#160;in using&#160;2 interrupt vector tables as shown in the&#160;<br/>figure below.&#160;<br/>&#160;<br/>
<b>Memory&#160;Map</b><br/>
<b>y</b><br/>
Application<br/>
Interrupt<br/>
Service<br/>
<b>s &#160;h &#160; &#160;M &#160;e &#160;m &#160;o &#160;r &#160;</b><br/>
Functions<br/>
Jump&#160;to&#160;<br/>
Interrupt<br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
Service&#160;<br/>
<b>F &#160;l &#160;a &#160;</b><br/>
<b>[Application]</b><br/>
Functions<br/>
<b>Validation Area</b><br/>
<b>&#160; M</b><br/>
Application<br/>
<b>A</b><br/>
Data<br/>
<b>R &#160;</b><br/>
all<br/>
<b>&#160;y</b><br/>
Others<br/>
<b>&#160;r</b><br/>
<b>Bootloader</b><br/>
Vectors<br/>
Transport&#160;Protocol,<br/>
KWP2000-Services,<br/>
CAN&#160;Driver<br/>
<b>&#160; M e m o</b><br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
Reset<br/>
<b>Interrupt Vector&#160;Table&#160;[FBL]</b><br/>
<b>&#160;l a s h<br/>F</b><br/>
&#160;<br/>
Figure 4-5&#160;&#160;Principle Of The&#160;Two Interrupt Vector Tables&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=25></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-25_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-25_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
24&#160;/ 56<br/>
The interrupt vector table at the memory&#160;address provided by&#160;the hardware is used&#160;<br/>by the Flash Bootloader (Interrupt Vector&#160;Table [FBL]). Your application must use&#160;<br/>
Every&#160;<br/>
its own vector table (Interrupt&#160;Vector Table [application]).&#160;<br/>
interrupt&#160;<br/>through&#160;Reset&#160;<br/>leads directly&#160;<br/>
Now if an interrupt occurs which is not&#160;a reset, then on the hardware side control&#160;<br/>
into&#160;the&#160;Flash&#160;<br/>Bootloader.&#160;<br/>
branches to&#160;the memory location whose address is at the corresponding location in&#160;<br/>the Flash Bootloader<i>‘</i>s interrupt vector table (see Figure 4-5). Any interrupt but the&#160;<br/>reset points into the Interrupt Vector Table of your application. Within your&#160;<br/>application Vector Table control is branched now to the appropriate interrupt&#160;<br/>service function. &#160;<br/>As a result, a slight overhead between detecting the&#160;interrupt and calling the&#160;<br/>interrupt service function is&#160;added to every&#160;interrupt service function. The delay is&#160;<br/>the duration of a jump&#160;instruction.&#160;<br/>An exception to this is the reset interrupt. It always points to&#160;the Flash Bootloader.&#160;<br/>
There is no&#160;direct path from reset into the application.&#160;<br/>
The CAN Driver working&#160;in the Flash Bootloader needs no interrupts itself, since it is&#160;<br/>running in polling mode. It checks cyclically to see if CAN messages have been&#160;<br/>received. Reception is&#160;not indicated via an interrupt, as is usually the case. For this&#160;<br/>reason no additional interrupt service functions&#160;are needed in the vector table for the&#160;<br/>Flash Bootloader.&#160;<br/>
You will find further particulars about the modifications&#160;you have to deal with to&#160;<br/>adjust your interrupt ve<a href="UserManual_FlashBootloaders.html#43">ctor table in Section&#160;6.2.4</a>.&#160;<br/>&#160;<br/><b>Refer to your Hardware-specific Documentation&#160;[#hw_intvect]&#160;to get more&#160;<br/>detailed information</b>.&#160;<br/>&#160;<br/>&#160;<br/>
<b>4.7&#160;</b><br/>
<b>Label Reference File&#160;</b><br/>
Some address information need to be shared between your application and the&#160;<br/>Bootloader. Some files such&#160;as the application vector&#160;table and the module table&#160;<br/>are referenced in both the application and&#160;the bootloader. These files are usually&#160;<br/>located in the application area, since&#160;they potentially change (module table,&#160;<br/>interrupt vector table).&#160;<br/>The data contents of these files could be erased at any time because they reside in&#160;<br/>the non-protected area.&#160;<br/>In special circumstances the Bootloader will eventually use the files. Therefore the&#160;<br/>application needs to compile and link these files to the&#160;<b>same</b>&#160;memory location. The&#160;<br/>module with these files should be downloaded as the first module to provide the&#160;<br/>data to the Bootloader whenever needed.&#160;This ensures a proper Bootloader&#160;<br/>execution. &#160;<br/><b>Refer to OEM-specific documentation&#160;[#oem_ref].&#160;</b><br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=26></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_5.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_6.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_7.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_8.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_9.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_10.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_11.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_12.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_13.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_14.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_15.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_16.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_17.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_18.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_19.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_20.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_21.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_22.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_23.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_24.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_25.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_26.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_27.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_28.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_29.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_30.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_31.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_32.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_33.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_34.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_35.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_36.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_37.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_38.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_39.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_40.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_41.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_42.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_43.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_44.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_45.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_46.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_47.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_48.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_49.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_50.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_51.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_52.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_53.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_54.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_55.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_56.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_57.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_58.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_59.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_60.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_61.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_62.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_63.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_64.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_65.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_66.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_67.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_68.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_69.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_70.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_71.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_72.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_73.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_74.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_75.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_76.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_77.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_78.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_79.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_80.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_81.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_82.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_83.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_84.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_85.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_86.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_87.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_88.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_89.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_90.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_91.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_92.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_93.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_94.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_95.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_96.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_97.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_98.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_99.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_100.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_101.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_102.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_103.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_104.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_105.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_106.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_107.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_108.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_109.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_110.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_111.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_112.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_113.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_114.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_115.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_116.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_117.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_118.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_119.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_120.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_121.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_122.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_123.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_124.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_125.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_126.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_127.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_128.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_129.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_130.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_131.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_132.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_133.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_134.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_135.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_136.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_137.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_138.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_139.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_140.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_141.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_142.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_143.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_144.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_145.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_146.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_147.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_148.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_149.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_150.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_151.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_152.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_153.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_154.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_155.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_156.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_157.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_158.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_159.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_160.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_161.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_162.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_163.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_164.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_165.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_166.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_167.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_168.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_169.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_170.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_171.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_172.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_173.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_174.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_175.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_176.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_177.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_178.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_179.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_180.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_181.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_182.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_183.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_184.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_185.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_186.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_187.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_188.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_189.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_190.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_191.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_192.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_193.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_194.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_195.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_196.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_197.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_198.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_199.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_200.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_201.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_202.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_203.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_204.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_205.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_206.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_207.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_208.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_209.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_210.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_211.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_212.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_213.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_214.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_215.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_216.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_217.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_218.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_219.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_220.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_221.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_222.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_223.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_224.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_225.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_226.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_227.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_228.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_229.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_230.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_231.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_232.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_233.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_234.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_235.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_236.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_237.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_238.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_239.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_240.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_241.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_242.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_243.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_244.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_245.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_246.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_247.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_248.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_249.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_250.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_251.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_252.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_253.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_254.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_255.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_256.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_257.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_258.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_259.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_260.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_261.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_262.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_263.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_264.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_265.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_266.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_267.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_268.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_269.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_270.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_271.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_272.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_273.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_274.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_275.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_276.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_277.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_278.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_279.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_280.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_281.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_282.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_283.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_284.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_285.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_286.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_287.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_288.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_289.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_290.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_291.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_292.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_293.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_294.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_295.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_296.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_297.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_298.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_299.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_300.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_301.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_302.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_303.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_304.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_305.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_306.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_307.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_308.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_309.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_310.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_311.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_312.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_313.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_314.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_315.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_316.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_317.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_318.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_319.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_320.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_321.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_322.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_323.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-26_324.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
25&#160;/ 56<br/>
<b>5&#160;&#160;&#160;FLASHING IN 5 STEPS&#160;</b><br/>
<b>STEP 1 :</b>&#160;&#160;&#160;<a href="UserManual_FlashBootloaders.html#28"><b>DESIGN THE MEMORY LAYOUT</b></a>&#160;&#160;<br/>
Figure out which&#160;component has to be&#160;placed&#160;at which memory location. Estimate the&#160;<br/>sizes.&#160;<br/>
<b>STEP 2: &#160;&#160;<a href="UserManual_FlashBootloaders.html#29">WRITE A TEST APPLICATION</a></b><b>&#160;&#160;</b><br/>
This&#160;can&#160;be&#160;any application or the application you&#160;later use for the ECU. It is very&#160;<br/>important, that this application is running&#160;correctly and you can recognize its&#160;running.&#160;<br/>This application is the evidence for the correct function&#160;of the Flash&#160;Bootloader.&#160;<br/>
<b>STEP 3:</b>&#160;&#160;<a href="UserManual_FlashBootloaders.html#30"><b>INTEGRATE THE BOOTLOADER</b></a><b>&#160;&#160;</b><br/>
In this step you have to integrate the Bootloader, download it via a programmer or&#160;<br/>burner and test it with the Flash Tool. This is the major step to be&#160;done!&#160;<br/>
Read<a href="UserManual_FlashBootloaders.html#30">&#160;the&#160;Introduction of this step</a>&#160;or go&#160;dire<a href="UserManual_FlashBootloaders.html#32">ctly to the&#160;8 Bootloader Integration step.&#160;</a><br/>
<b>STEP 4: &#160;&#160;<a href="UserManual_FlashBootloaders.html#31">ADAPT YOUR TEST&#160;APPLICATION FOR THE TESTER</a></b><br/>
To prepare the application hex file for being downloaded via the Tester, it has to be&#160;<br/>converted to&#160;an OEM-specific format. Do this&#160;in this&#160;step and refer to the description&#160;<br/>provided&#160;by your OEM.&#160;<br/>
<b>STEP 5: &#160;&#160;<a href="UserManual_FlashBootloaders.html#31">DOWNLOAD YOUR TEST APPLICATION WITH THE TESTER</a></b><br/>
Now do the&#160;download&#160;the&#160;test application as&#160;before&#160;but now using the OEM-specific&#160;<br/>Tester. &#160;<br/>
OEM&#160;specific<br/>
Tester<br/>
5<br/>
4<br/>
2<br/>
Test<br/>
<b>Programer</b><br/>
¯<br/>
<b>CAN</b><i>fbl</i><br/>
<b>CAN</b><i>fbl</i><br/>
<b>Burner</b><br/>
Application<br/>
2&#160;/*&#160;Test&#160;Application&#160;*/<br/>
#include&#160;...<br/>
1<br/>
<b>CAN</b><br/>
Test<br/>
#define ..<br/>main<br/>
3&#160;Application<br/>
{<br/>
Extract<br/>
3<br/>
...<br/>
Adjust<br/>
}<br/>
Compile<br/>Link<br/>
<b>Applvect.c</b><br/>
<b>[Application]</b><br/>
<b>Programer</b><br/>
<b>Burner</b><br/>
Bootloader<br/>
Transport&#160;Protocol,<br/>
3&#160;KWP2000-Services,<br/>
CAN Driver<br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>fbl_vect.c</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 1:&#160;&#160;&#160;5 Steps And&#160;You&#160;Are Flashing&#160;via Flash Tool and&#160;OEM-specific Tester&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=27></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-27_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-27_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
26&#160;/ 56<br/>
<b>5.1&#160;</b><br/>
<b>STEP 1 Design The Memory&#160;Layout&#160;</b><br/>
As flashing is a memory related activity you first need a basic estimation about&#160;the&#160;<br/>memory consumption. Based on the controller you use and the memory model&#160;<br/>start with a basic design for the memory layout. &#160;<br/>Define where your application&#160;has&#160;its location, define the location of the application&#160;<br/>vector table and the Bootloader. Figure out&#160;where your controller has its “original”&#160;<br/>interrupt vector table.&#160;<br/>Refer to the hardware-specific&#160;documentation for more information&#160;<b>[#hw_mem]</b>.&#160;<br/>
<b>Memory&#160;Map</b><br/>
Application<br/>
<b>y</b><br/>
<b>&#160;m &#160;o &#160;r &#160;<br/>&#160; e&#160;<br/>&#160;M</b><br/>
<b>s &#160;h &#160;&#160;</b><br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
<b>&#160; a &#160;</b><br/>
<b>[Application]</b><br/>
<b>F &#160;l</b><br/>
<b>Validation Area</b><br/>
Application<br/>
Data<br/>
<b>&#160; M<br/>&#160;A<br/>R&#160;</b><br/>
<b>y<br/>&#160;r&#160;</b><br/>
<b>Bootloader</b><br/>
Transport&#160;Protocol,<br/>
<b>&#160;m o</b><br/>
KWP2000-Services,<br/>
<b>&#160;e</b><br/>
CAN&#160;Driver<br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>s h &#160;M</b><br/>
<b>Interrupt Vector Table</b><br/>
<b>[FBL]</b><br/>
<b>F l a&#160;</b><br/>
&#160;<br/>
Figure 5-1&#160;&#160;Basic Memory&#160;Layout&#160;Of An Application with the Flash Bootloader&#160;<br/>
&#160;<br/>
<a href="UserManual_FlashBootloaders.html#27">Back</a>&#160;to 5 Steps overview&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=28></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-28_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-28_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-28_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
27&#160;/ 56<br/>
<b>5.2&#160;</b><br/>
<b>STEP 2 Write A&#160;Test Application&#160;</b><br/>
The Flash Bootloader is designed to download your application&#160;via a&#160;bus protocol&#160;<br/>like CAN, LIN, etc. To test&#160;the correct function of the Flash Bootloader you first&#160;<br/>need a Test&#160;Application to verify the work of the Flash Bootloader. &#160;<br/>In this step, write a Test Application.&#160;<br/>
<b>Memory&#160;Map</b><br/>
<b>y<br/>&#160;r &#160;</b><br/>
Application<br/>
<b>&#160;o&#160;<br/>m&#160;<br/>&#160;&#160;e &#160;</b><br/>
<b>&#160; &#160; M</b><br/>
<b>a &#160;s &#160;h<br/>&#160; l &#160;<br/>F</b><br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
<b>[Application]</b><br/>
<b>&#160;&#160;M</b><br/>
Application<br/>
<b>&#160;A</b><br/>
Data<br/>
<b>R&#160;</b><br/>
<b>&#160;y</b><br/>
<b>&#160;m o r</b><br/>
<b>&#160;s&#160;h &#160;M e</b><br/>
<b>Interrupt Vector&#160;Table</b><br/>
<b>&#160;l&#160;a<br/>F</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 5-2&#160;&#160;The Test Application In The ECU&#160;Memory&#160;Using Two&#160;Interrupt Vector Tables&#160;<br/>
&#160;<br/>It’s recommended to write the Test Application with at least one interrupt service&#160;<br/>function, perhaps a timer to do some cyclic&#160;action. Make sure that the application is&#160;<br/>showing its correct behavior e.g. via LED&#160;blinking or even the transmission of a&#160;<br/>CAN message. This will be later on the indicator for the correct working Flash&#160;<br/>Bootloader. &#160;<br/>Download and test this application&#160;via your development environment.&#160;<br/>&#160;<br/>
It’s recommended to work with two&#160;interrupt vector tables from the beginning. Just&#160;<br/>map all interrupts from the “original” vector table to the interrupt vector&#160;table of your&#160;<br/>application.&#160;<br/>
For more information refer to the hardware-specific documentation&#160;<b>[#hw_tstappl]</b>.&#160;<br/>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#27">Back</a>&#160;to 5 Steps overview&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=29></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-29_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-29_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
28&#160;/ 56<br/>
<b>5.3&#160;</b><br/>
<b>STEP 3 Integrate The Bootloader&#160;</b><br/>
This is the major step for you to&#160;do. You have to unpack the delivered files, do&#160;<br/>some application specific adaptations, compile the Bootloader, and download it. &#160;<br/>In order to test the Bootloader, you need to&#160;flash your&#160;test application that you&#160;<br/>created in the previous step. To do so you should configure the Flash Tool properly&#160;<br/>prior to testing.&#160;<br/>Use the Flash Tool of the Flash Bootloader package to download your&#160;test&#160;<br/>application.&#160;Once you have managed to get&#160;your Bootloader to work with the Flash&#160;<br/>Tool then you can go on and use the OEM-specific Test Tool. Now the embedded&#160;<br/>side is working and you can concentrate&#160;on adapting the OEM-specific tester.&#160;<br/>&#160;<br/>
<b>&#160;y<br/>&#160;r&#160;<br/>o&#160;</b><br/>
<b>&#160; m &#160;</b><br/>
Application<br/>
<b>e<br/>&#160;M &#160;<br/>&#160; &#160;</b><br/>
<br/>
&lt;application&gt;<b>.hex</b><br/>
<b>&#160;h<br/>s&#160;<br/>&#160;&#160;</b><br/>
Interrupt&#160;Vector&#160;Table<br/>
abl<br/>
<b>&#160;a<br/>l&#160;</b><br/>
[Appl<br/>
[App&#160;ication]<br/>
Flash<br/>
<b>F &#160;</b><br/>
Conversion&#160;<br/>
Tool<br/>
to&#160;OEM&#160;specific<br/>
<b>M</b><br/>
format to&#160;fulfil&#160;<br/>
<b>&#160;&#160;<br/>&#160;A</b><br/>
Flash Driver<br/>
Tester&#160;needs<br/>
<b>R&#160;</b><br/>
(flash&#160;container)<br/>
<b>&#160;y</b><br/>
Bootloader<br/>
&lt;application&gt;<b>.&lt;oem-format&gt;</b><br/>
<b>&#160;e m o r</b><br/>
<br/>
<b>M</b><br/>
CAN<br/>
LIN<br/>
<b>&#160;&#160;<br/>h</b><br/>
OEM&#160;specific<br/>
<b>&#160;l a s&#160;</b><br/>
Interrupt&#160;Vector&#160;Table<br/>
<b>F</b><br/>
[FBL]<br/>
TESTER<br/>
&#160;<br/>
Figure 5-3&#160;&#160;Flashing via Flash Tool and&#160;OEM-specific Tester&#160;<br/>
The application is&#160;compiled to a hex file&#160;to be used with the Flash Tool. The Flash&#160;<br/>Tool controls the download via the bus&#160;system (here CAN) and communicates with&#160;<br/>the Bootloader. To be able to flash with&#160;an OEM-specific tester, some adaptations&#160;<br/>have to be done to the application hex file. &#160;<br/>
Integrate&#160;the&#160;<br/>
For more information refer to&#160;documentation about this workflow provided by your&#160;<br/>
Bootloader in&#160;<br/>
OEM.&#160;<br/>
8 Steps&#160;<br/><a href="UserManual_FlashBootloaders.html#32">more…&#160;(see</a>&#160;<br/>Chapter&#160;<b>6</b>)&#160;<br/>
&#160;<br/>Follow the&#160;<a href="UserManual_FlashBootloaders.html#32">8 Integration Steps</a>&#160;for&#160;the Bootloader (see Chapter&#160;<a href="UserManual_FlashBootloaders.html#31">6) before continuing&#160;<br/></a>with the next step.&#160;<br/>&#160;<br/>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#27">Back</a>&#160;to 5 Steps overview&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=30></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-30_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-30_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-30_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-30_4.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
29&#160;/ 56<br/>
<b>5.4&#160;</b><br/>
<b>STEP 4 Adapt Your Test&#160;Application For The Tester&#160;</b><br/>
The next step after downloading the test application is&#160;to &#160;adapt your&#160;<br/>&lt;application.hex&gt; file to be downloaded via the OEM-specific tester (see&#160;<br/><a href="UserManual_FlashBootloaders.html#30">explanation in the&#160;STEP 3</a>).&#160;<br/>
To test these adaptations, no change of the Bootloader software is necessary.&#160;<br/>
&#160;<br/>Normally there are several steps necessary to&#160;convert the hex file into a file that&#160;<br/>can be read and used by the tester. Get more&#160;information about this workflow using&#160;<br/>the documentation provided by your OEM.&#160;<br/>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#27">Back</a>&#160;to 5 Steps overview&#160;<br/>&#160;<br/>&#160;<br/>
<b>5.5&#160;</b><br/>
<b>STEP 5 Download Your Test&#160;Application With The Tester&#160;</b><br/>
Now you can test the Bootloader using&#160;your OEM-specific Tester. You can test&#160;<br/>things such&#160;as starting a Flash programming triggered via reset, or initiated from&#160;<br/>the application, etc. &#160;<br/>&#160;<br/>Is it still working? &#160;<br/>&#160;<br/>Congratulations, you did it! &#160;<br/>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#27">Back</a>&#160;to 5 Steps overview.&#160;<br/><a href="UserManual_FlashBootloaders.html#48">Continue with the&#160;Background Information</a>.&#160;<br/>&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=31></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_5.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_6.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_7.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_8.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_9.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_10.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_11.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_12.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_13.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_14.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_15.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_16.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_17.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_18.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_19.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_20.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_21.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_22.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_23.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_24.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_25.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_26.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_27.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_28.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_29.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_30.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_31.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_32.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_33.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_34.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_35.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_36.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_37.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_38.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_39.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_40.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_41.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_42.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_43.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_44.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_45.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_46.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_47.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_48.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_49.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_50.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_51.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_52.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_53.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_54.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_55.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_56.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_57.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_58.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_59.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_60.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_61.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_62.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_63.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_64.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_65.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_66.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_67.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_68.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_69.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_70.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_71.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_72.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_73.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_74.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_75.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_76.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_77.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_78.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_79.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_80.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_81.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_82.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_83.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_84.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_85.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_86.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_87.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_88.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_89.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_90.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_91.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_92.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_93.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_94.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_95.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_96.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_97.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_98.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_99.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_100.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_101.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_102.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_103.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_104.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_105.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_106.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_107.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_108.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_109.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_110.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_111.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_112.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_113.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_114.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_115.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_116.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_117.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_118.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_119.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_120.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_121.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_122.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_123.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_124.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_125.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_126.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_127.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_128.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_129.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_130.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_131.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_132.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_133.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_134.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_135.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_136.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_137.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_138.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_139.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_140.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_141.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_142.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_143.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_144.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_145.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_146.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_147.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_148.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_149.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_150.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_151.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_152.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_153.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_154.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_155.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_156.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_157.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_158.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_159.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_160.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_161.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_162.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_163.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_164.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_165.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_166.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_167.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_168.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_169.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_170.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_171.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_172.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_173.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_174.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_175.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_176.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_177.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_178.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_179.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_180.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_181.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_182.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_183.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_184.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_185.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_186.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_187.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_188.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_189.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_190.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_191.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_192.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_193.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_194.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_195.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_196.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_197.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_198.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_199.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_200.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_201.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_202.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_203.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_204.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_205.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_206.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_207.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_208.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_209.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_210.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_211.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_212.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_213.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_214.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_215.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_216.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_217.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_218.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_219.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_220.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_221.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_222.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_223.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_224.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_225.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_226.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_227.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_228.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_229.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_230.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_231.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_232.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_233.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_234.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_235.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_236.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_237.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_238.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_239.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_240.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_241.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_242.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_243.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_244.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_245.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_246.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_247.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_248.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_249.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_250.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_251.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_252.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_253.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_254.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_255.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_256.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_257.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_258.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_259.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_260.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_261.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_262.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_263.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_264.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_265.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_266.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_267.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_268.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_269.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_270.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_271.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_272.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_273.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_274.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_275.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_276.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_277.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_278.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_279.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_280.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_281.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_282.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_283.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_284.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_285.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_286.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_287.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_288.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_289.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_290.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_291.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_292.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_293.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_294.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_295.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_296.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_297.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_298.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_299.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_300.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_301.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_302.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_303.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_304.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_305.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_306.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_307.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_308.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_309.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_310.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_311.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_312.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_313.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_314.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_315.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_316.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_317.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_318.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_319.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_320.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_321.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_322.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_323.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_324.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_325.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_326.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_327.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_328.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_329.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_330.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_331.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_332.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_333.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_334.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_335.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_336.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_337.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_338.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-31_339.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
30&#160;/ 56<br/>
<b>6&#160;&#160;&#160;Details of Bootloader&#160;Integration Step (STEP&#160;3)&#160;</b><br/>
<b>Bootloader&#160;STEP 1:</b>&#160;&#160;&#160;<a href="UserManual_FlashBootloaders.html#33"><b>Extract the files to&#160;a&#160;folder on your PC<br/></b></a><b>Bootloader&#160;STEP 2: &#160;&#160;<a href="UserManual_FlashBootloaders.html#36">Adjust the files to fit your application&#160;&#160;<br/></a></b><b>Bootloader&#160;STEP 3:</b>&#160;&#160;<a href="UserManual_FlashBootloaders.html#46"><b>Now&#160;compile the&#160;Bootloader&#160;&#160;<br/></b></a><b>Bootloader&#160;STEP 4: &#160;&#160;<a href="UserManual_FlashBootloaders.html#46">Transfer the Bootloader to the target hardware<br/></a></b><b>Bootloader&#160;STEP 5: &#160;&#160;<a href="UserManual_FlashBootloaders.html#46">Use the Flash Tool to test the&#160;Bootloader<br/></a></b><b>Bootloader&#160;STEP 6: &#160;&#160;<a href="UserManual_FlashBootloaders.html#46">Test the flashing after a reset<br/></a></b><b>Bootloader&#160;STEP 7: &#160;&#160;<a href="UserManual_FlashBootloaders.html#47">Make your&#160;application ready&#160;for transition to Bootloader<br/></a></b><b>Bootloader&#160;STEP 8: &#160;&#160;<a href="UserManual_FlashBootloaders.html#47">Start Bootloader from your application<br/></a></b><b>&#160;<br/>&#160;</b><br/>
3&#160;Details of Step 3<br/>
¯<br/>
<b>CAN</b><i>fbl</i><br/>
<b>CAN</b><i>fbl</i><br/>
8<br/>
7&#160;/* Test Application&#160;*/<br/>
#include&#160;...<br/>
<b>CAN</b><br/>
5<br/>
Test<br/>
#define ..<br/>main<br/>
Application<br/>
1<br/>
{<br/>
Extract<br/>
...<br/>
}<br/>
2&#160;Adjust<br/>
Compile<br/>
3&#160;Link<br/>
<b>Applvect.c</b><br/>
<b>[Application]</b><br/>
4&#160;<b>Programer</b><br/>
<b>Burner</b><br/>
Bootloader<br/>
Transport Protocol,<br/>
KWP2000-Services,<br/>
6<br/>
CAN Driver<br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>fbl_vect.c</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 6-1&#160;&#160;Details of Bootloader Integration&#160;Step (Step 3)&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=32></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_5.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_6.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_7.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_8.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_9.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_10.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_11.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_12.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_13.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_14.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_15.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_16.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-32_17.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
31&#160;/ 56<br/>
<b>6.1&#160;</b><br/>
<b>Bootloader STEP 1 – Extract the files to a folder on your pc&#160;</b><br/>
Extract the Flash Bootloader files just by&#160;starting the install shield. Per default the&#160;<br/>files are installed to the folder&#160;<b>C:\Programme\Vector\...</b>. You can also use the&#160;<br/><b>Start\Programme\Vector…</b>&#160;to find your installation. &#160;<br/>The files are installed with the&#160;following directory structure.&#160;<br/>
<b>Name</b><br/>
<b>Description</b><br/>
&#160;StandardECU<br/>
Root directory of the delivery, root name may differ.<br/>
&#160;_Common<br/>
Contains&#160;common files shared between the application and the&#160;<br/>bootloader.&#160;<br/><i>[e.g. v_def.h, etc.]&#160;</i><br/>
&#160;_Demo<br/>
Contains an&#160;example implementation.&#160;<br/>
&#160; &#160; &#160;&#160;<br/>
&#160;DemoAppl<br/>
An application that is prepared to be downloaded to the micro via the&#160;<br/>Flash Bootloader and CANflash.&#160;<br/>
&#160; &#160;<br/>
&#160;DemoFbl<br/>
The bootloader part of the demo. This&#160;directory contains an example&#160;<br/>of a full functional bootloader (e.g. including in-/validation, transition&#160;<br/>from application to bootloader and a comprehensive&#160;mapping&#160;of the&#160;<br/>bootloader sections).&#160;<br/>
&#160;_Doc<br/>
Contains documentation and test&#160;reports&#160;for the bootloader.&#160;<br/><i>[e.g. UserManual_FlashBootloader.pdf,&#160;<br/>TechnicalReference_FBL_*.pdf, TestReport*.pdf, etc.]&#160;</i><br/>
&#160; &#160;<br/>
&#160;_FlashScript<br/>
CANdito flash&#160;scripts provided with&#160;the&#160;bootloader. This directory&#160;<br/>only exists if there are flashscripts&#160;available for the SLP.&#160;<br/>
&#160; &#160;<br/>
&#160;_GenTool<br/>
Generation tool for the flash bootloader&#160;configuration files. In case of&#160;<br/>CANgen, the license file is&#160;located here.&#160;<br/><i>[e.g. CanGen.exe, license.liz,&#160;GENyFramework_*.exe, etc.]&#160;</i><br/>
&#160; &#160; &#160;&#160;<br/>
&#160;Components&#160;Directory for GENy component-DLLs. If GENy is used, the license&#160;<br/>
can be&#160;found&#160;here. Otherwise, this directory does not exist.&#160;<br/><i>[e.g. license.liz, Version.Info, preconfig*.pco, etc.]&#160;</i><br/>
&#160; &#160;<br/>
&#160;_MakeSupport<br/>
Make environment used&#160;by demo bootloader and application. This&#160;<br/>folder contains&#160;the global makefile.&#160;<br/><i>[e.g. Global.Makefile.target.make.*, etc.]&#160;</i><br/>
&#160; &#160;<br/>
_Misc<br/>
Everything that doesn’t fit into the other&#160;directories&#160;can be placed&#160;<br/>here&#160;(e. g. little tools, that don’t require an&#160;installation&#160;procedure)&#160;<br/>
&#160; &#160; &#160;&#160;<br/>
&#160;HexView<br/>
The best tool to generate, edit&#160;and process hex-files. Can build&#160;<br/>plenty of flash containers, too.&#160;<br/>
&#160; &#160;<br/>
&#160;_Setup<br/>
Setup files for PC-installable software included in the&#160;delivery (e. g.&#160;<br/>CANflash)&#160;<br/><i>[e.g. CANflashFord25.EXE, etc.]&#160;</i><br/>
&#160; &#160; &#160;<br/>
&#160;DrvEep<br/>
EEPROM-driver to be used with the bootloader&#160;<br/><i>[e.g. EepDrv.c, EepIO.c,&#160;EepCfg.h, etc.]&#160;</i><br/>
&#160; &#160;<br/>
&#160;DrvFlash<br/>
Flash-EEPROM-driver to&#160;be used&#160;with&#160;the bootloader (aka&#160;<br/>secondary bootloader). This&#160;directory&#160;contains the&#160;source files of the&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=33></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_5.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_6.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_7.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_8.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_9.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_10.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_11.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_12.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_13.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_14.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_15.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_16.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-33_17.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
32&#160;/ 56<br/>
driver and a ready-to-use function&#160;file container for the used&#160;SLP. &#160;<br/><i>[e.g. flashdrv.c,&#160;flashdrv.h, FlashDrv_V850_f.hex, etc.]&#160;</i><br/>
&#160;Fbl<br/>
Contains all bootloader files, except flash-driver and security module&#160;<br/><i>[e.g. fbl_main.c, fbl_hw.c, fbl_diag.c, etc.]&#160;</i><br/>
&#160; &#160; &#160;&#160;<br/>
&#160;_Template<br/>
Contains files that are part&#160;of the flash bootloader but&#160;need to be&#160;<br/>adapted&#160;for integration purposes. The files contain a&#160;collection of&#160;<br/>callback-functions grouped&#160;in different files for different&#160;purposes.&#160;<br/>The functions mainly adapt&#160;to the specific&#160;needs of the bootloader to&#160;<br/>a particular project resp. adapts the hardware requirements of the&#160;<br/>Bootloader.&#160;<br/><i>[e.g. _fbl_ap.c, _fbl_apdi.c, _fbl_apwd.c, _fbl_apfb.c, etc.]&#160;</i><br/>
&#160;&#160;<br/>
&#160;SecMod<br/>
Security module for the bootloader.&#160;<br/><i>[e.g. secmod.c,&#160;_secmod.h, etc.]&#160;</i><br/>
&#160;<br/>&#160;<br/>The files listed in the table&#160;are installed to the folder&#160;<b>Fbl</b>. The files with the _&#160;<br/>
Since&#160;the&#160;<br/>
(underscore) are installed to the folder&#160;<b>Fbl\_Template,</b>&#160;<b>v_def.h</b>&#160;is in the&#160;<b>_Common&#160;</b><br/>
Flash&#160;<br/>Bootloader is&#160;<br/>
path and the flashdrv.h in the&#160;<b>DrvFlash</b>&#160;folder. &#160;<br/>
an&#160;<br/>independent&#160;<br/>application,&#160;it&#160;<br/>
<b>File Name&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Status&#160;</b><br/>
must be&#160;<br/>possible&#160;for&#160;<br/>you&#160;in&#160;most&#160;<br/>
Makfile of project file&#160;Makefile or&#160;project file for the build process of the&#160;<br/>
cases to&#160;take&#160;<br/>
Bootloader.&#160;<br/>
the directory&#160;<br/>
&#160;<br/>
structure,&#160;as&#160;<br/>
fbl_cfg.h<br/>
Global Bootloader&#160;configuration. This file is generated&#160;<br/>
unpack it.&#160;<br/>
by the configuration tool. &#160;<br/>
&#160;<br/>
_fbl_apxx.c /&#160;<br/>
Hardware and system&#160;specific callback functions.&#160;<br/>
_fbl_apxx.h<br/>
&#160;<br/>
_ftp_cfg.h<br/>
Transport layer configuration file. Very soon, this file&#160;<br/>is also generated by configuration tool.&#160;<br/>
_fbl_inc.h<br/>
Include file for the Bootloader. Include additional&#160;<br/>header files if&#160;necessary.&#160;<br/>
&#160;<br/>
_applvect.c /&#160;<br/>
Application vector table&#160;<br/>
applvect.h<br/>
&#160;<br/>
fbl_diag.c / fbl_diag.h&#160;General Diagnostic Module that contains&#160;the&#160;<br/>
diagnostic handling (KWP2000) and the&#160;basic&#160;<br/>bootloader functionalities.&#160;<br/>
&#160;<br/>
fbl_can.h<br/>
Definitions&#160;for CAN interface.&#160;<br/>
&#160;<br/>
fbl_def.h&#160;<br/>
Basic Bootloader definitions.&#160;<br/>
&#160;<br/>
fbl_hw.c / fbl_hw.h<br/>
Hardware-specific module&#160;for CAN and timer.&#160;<br/>
&#160;<br/>
fbl_main.c&#160;<br/>
Main module&#160;for Bootloader&#160;initialization and idle&#160;<br/>loop.&#160;<br/>
&#160;<br/>
fbl_tp.c / fbl_tp.h<br/>
Transport layer for the FBL.&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=34></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-34_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-34_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-34_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-34_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-34_5.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-34_6.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
33&#160;/ 56<br/>
fbl_vect.c<br/>
Bootloader vector table.&#160;<br/>
&#160;<br/>
fbl_wd. / fbl_wd.h<br/>
Watchdog support.&#160;<br/>
&#160;<br/>
flashdrv.h<br/>
Interface header file for Flash Driver.&#160;<br/>
&#160;<br/>
v_def.h<br/>
Type definitions from Vector Informatik&#160;<br/>
&#160;<br/>
<b>Caution&#160;<br/>It is absolutely&#160;necessary&#160;that YOU&#160;adapt the startup-code for&#160;the Bootloader to&#160;your&#160;<br/>specific hardware platform!</b>&#160;&#160;<br/>
Remind&#160;that there&#160;will be two startup-codes executed&#160;subsequently, first the startup-code of the&#160;<br/>Bootloader, then the startup-code of your&#160;application.&#160;&#160;<br/>
<b>!!! be careful&#160;with registers that&#160;can be&#160;written only&#160;once after&#160;reset !!!<br/></b>&#160;<br/>You can adapt these files according to your application (fbl_vect cannot be&#160;<br/>adapted by&#160;user). A detailed description of how&#160;that is&#160;to be handled&#160;can be found&#160;<br/>in Section&#160;<a href="UserManual_FlashBootloaders.html#35">6.2. In your delivery all files that&#160;</a>you have to&#160;adapt are marked with an&#160;<br/>underscore (_&lt;file&gt;) before&#160;the name and stored in the&#160;<b>_Template</b>&#160;folder. Create&#160;<br/>an own folder to store the adapted&#160;files without the underscore. &#160;<br/>&#160;<br/>
<b>OEM specific&#160;</b><br/>
<b>OEM specific – some more files, refer to your&#160;OEM specific reference&#160;<br/>[#oem_files].&#160;</b><br/>
<b>&#160;</b><br/>
<a href="UserManual_FlashBootloaders.html#32">Back</a>&#160;to 8 Steps Bootloader&#160;integration overview<b>&#160;</b><br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=35></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-35_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-35_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-35_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
34&#160;/ 56<br/>
<b>6.2&#160;</b><br/>
<b>Bootloader STEP 2 Adjust the marked files to fit your application&#160;</b><br/>
Now you go through the files pointed to&#160;by the hand in the above diagram in detail&#160;<br/>and adapt them specifically&#160;to your application.&#160;<br/>&#160;<br/>
<b>6.2.1&#160;&#160;Make… Makefile and make.exe&#160;<br/></b>To be able to compile the Flash Bootloader you just have to adapt the file&#160;<br/>makeconf by setting the compiler path to your demands, see an example&#160;<br/>e.g. COMPILER_PATH &#160; =&#160;c:\uti\hc12\cx32&#160;<br/>Then you can execute the make.exe to compile and link for the first time. Now you&#160;<br/>can start upon this basis and adapt&#160;the files for your demands.&#160;<br/>&#160;<br/>
<b>6.2.2 fbl_cfg.h</b>&#160;-&#160;<b>The Configuration File For The&#160;Flash Bootloader&#160;<br/></b>If you are using a Generation Tool with&#160;the bootloader then the Generation Tool&#160;<br/>creates this file. To modify the bootloader&#160;you would simply have to trigger the&#160;<br/>generation process again. If you are not&#160;using the generation tool with the&#160;<br/>bootloader then you can manually configure the bootloader by modifying defines&#160;<br/>such as clock frequency, CAN baudrate, etc…&#160;<br/>See the list of the possible switches below to be changed followed by a brief&#160;<br/>description. To get more&#160;information refer&#160;to the comments in the file fbl_cfg.h.&#160;<br/>&#160;<br/>
CAN_TP_RXID<br/>
Receive ID for the transport protocol&#160;<br/>
CAN_TP_TXID<br/>
Send ID for the transport protocol&#160;<br/>
FBL_ENABLE/DISABLE_DEBUG_STATUS<br/>
Additional hints for debugging (if&#160;<br/>possible)&#160;<br/>
FBL_ENABLE/DISABLE_SYSTEM_CHECK<br/>
Checks if data buffer will be overwritten<br/>
FBL_ENABLE/DISABLE_FLASHBLOCK_CHECK<br/>
The pre-defined flashblocks in FBL_AP&#160;<br/>are checked&#160;and aligned during&#160;<br/>download&#160;<br/>
FBL_ENABLE/DISABLE_APPL_TASK<br/>
Enable a cyclic task for some timing&#160;<br/>adjustments&#160;(call cycle TpCallCycle typ.&#160;<br/>1ms).&#160;<br/>
FBL_MAX_NUMBER_OF_MODULES<br/>
Set here the&#160;number of modules&#160;that&#160;<br/>shall be downloaded and programmed.&#160;<br/>
FBL_ENABLE/DISABLE_SECTOR_ERASE_FCT<br/>
Enable the usage of the callback&#160;<br/>function ApplFblSectorErase()&#160;<br/>
FBL_ENABLE/DISABLE_FILECHECKSUM<br/>
Enables&#160;an internal file checksum&#160;<br/>calculation. This checksum&#160;is&#160;<br/>generated during the download&#160;<br/>sequences&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=36></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-36_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-36_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
35&#160;/ 56<br/>
FBL_ENABLE/DISABLE_ENCRYPTION_MODE<br/>
If you enable this switch, further&#160;<br/>functions are called to decrypt coded&#160;<br/>data. (ApplFblEncryptInit,&#160;<br/>ApplFblEncryptData).&#160;<br/>
FBL_WATCHDOG_ON/OFF<br/>
Switch&#160;Watchdog on or&#160;off&#160;<br/>
FBL_WATCHDOG_TIME<br/>
Setting of the watchdog trigger&#160;cycle&#160;<br/>
FBL_PROCESSOR_40MHZ<br/>
Some clock&#160;settings&#160;may not be&#160;<br/>available on&#160;all CPUs. Please refer to&#160;<br/>fbl_hw.c, FblTimerInit&#160;<br/>
FBL_ENABLE/DISABLE_STAY_IN_BOOT<br/>
Setting&#160;<br/>FBL_DISABLE_STAY_IN_BOOT, it is&#160;<br/>not possible to force the bootloader not&#160;<br/>to start the application.&#160;<br/>
FBL_DIAG_BUFFER_LENGTH<br/>
This is the size of the diagnostic data&#160;<br/>buffer used for USDT&#160;<br/>reception/transmission&#160;<br/>(COMMON_BUFFER mode).&#160;<br/>
FBL_START<br/>
Start address of the FBL.&#160;<br/>
FLASH_SIZE<br/>
Specifies the number of bytes used for&#160;<br/>the Flashcode&#160;(aka flash driver).&#160;<br/>
&#160;<br/><b>Note</b>: Allocate&#160;as&#160;much&#160;memory as&#160;<br/>possible to be able to download a&#160;<br/>bigger flash driver in the future.&#160;<br/>
CAN_BTR01<br/>
Bus timing configuration for normal&#160;<br/>mode&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=37></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-37_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
36&#160;/ 56<br/>
<b>6.2.3 FBL_apxx.C&#160;<br/></b>The next thing you have to&#160;do is adapt the Flash Bootloader<i>&#160;</i>to your application and&#160;<br/>
Set&#160;up&#160;and&#160;<br/>initialize&#160;these&#160;<br/>
hardware. The following functions have to be adapted: &#160;<br/>
functions&#160;<br/>according&#160;to&#160;your&#160;<br/>
&#160;<br/>
needs.&#160;When&#160;<br/>doing this,&#160;follow&#160;<br/>the&#160;descriptions&#160;<br/>
<b>Function Name&#160;</b><br/>
<b>File Name&#160;</b><br/>
for&#160;each&#160;and&#160;use&#160;<br/>Figure 6-2&#160;for a&#160;<br/>complete&#160;<br/>
ApplFblInit&#160;<br/>
fbl_ap&#160;<br/>
overview.&#160;<br/>
ApplFblStartup&#160;<br/>
fbl_ap&#160;<br/>
ApplTrcvrNormalMode&#160;<br/>
fbl_ap&#160;<br/>
ApplFblSetVfp&#160;<br/>
fbl_ap&#160;<br/>
ApplFblResetVfp&#160;<br/>
fbl_ap&#160;<br/>
ApplCanParamInit&#160;<br/>
fbl_ap&#160;<br/>
ApplFblFlashBlockNotFound&#160;<br/>
fbl_ap&#160;<br/>
ApplFblTask&#160;<br/>
fbl_ap&#160;<br/>
ApplFblIsValidApp&#160;<br/>
fbl_ap&#160;<br/>
ApplFblInvalidateApp *,&#160;ApplFblValidateApp *&#160;&#160;&#160;<br/>
fbl_ap&#160;<br/>
ApplFblSecuritySeed&#160;<br/>
fbl_ap&#160;<br/>
ApplFblSecurityKey&#160;<br/>
fbl_ap&#160;<br/>
ApplFblSectorErase&#160;<br/>
fbl_ap&#160;<br/>
ApplFblWDInit&#160;<br/>
fpl_apwd&#160;<br/>
ApplFblWDShort&#160;<br/>
fbl_apwd&#160;<br/>
AplFblWDTrigger &#160;<br/>
fbl_apwd&#160;<br/>
ApplFblWDLong&#160;&#160;<br/>
fbl_apwd&#160;<br/>
&#160;<br/>You will find&#160;these functions&#160;again&#160;in&#160;<a href="UserManual_FlashBootloaders.html#38">Figure 6-2.</a>&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=38></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-38_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-38_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-38_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
37&#160;/ 56<br/>
<b>Application</b><br/>
<b>FblStart</b><br/>
<b>Bootloader</b><br/>
<b>ApplFblWDShort</b><br/>
yes<br/>
<b>ApplFblIsValidApp</b><br/>
<b>ApplFblInit</b><br/>
<b>Reset</b><br/>
OEM&#160;specific<br/>
<b>Optional: initialize&#160;WD&#160;</b><br/>
no<br/>
wait&#160;time<br/>
<b>and set trigger time&#160;*</b><br/>
<b>ApplFblStartup</b><br/>
<b>ApplFblStartup</b><br/>
<b>ApplFblWDInit</b><br/>
<b>Optional: initialize&#160;WD</b><br/>
<b>and set trigger time&#160;*</b><br/>
<b>ApplFblCanParamInit</b><br/>
<b>ApplTrcvrNormalMode<br/>[End&#160;of&#160;Initialization Phase]</b><br/>
<b>Wait for&#160;Diagnostic Service to start Flash</b><br/>
<b>ApplFblWDTrigger</b><br/>
<b>ApplFblSecuritySeed</b><br/>
<b>[Queried via&#160;KWP2000]</b><br/>
<b>ApplFblSecurityKey</b><br/>
<b>[Queried via&#160;KWP2000]</b><br/>
<b>Download of Flash&#160;Algorithms</b><br/>
<b>ApplFblSetVfp</b><br/>
<b>ApplFblInvalidateApp</b><br/>
<b>Erase Flash&#160;Memory<br/>ApplFblSectorErase (opt.)</b><br/>
<b>Download Application&#160;Data</b><br/>
<b>ApplFblFlashBlockNotFound</b><br/>
<b>ApplFblValidateApp</b><br/>
<b>ApplFblResetVfp</b><br/>
<b>ApplFblWDLong</b><br/>
<b>Dependent on OEM</b><br/>
&#160;<br/>
Figure 6-2&#160;&#160;Function Calling&#160;Sequence During&#160;Flashing&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=39></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-39_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-39_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-39_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
38&#160;/ 56<br/>
The Watchdog may only be initialized in one of the two optional functions. In most&#160;<br/>cases this&#160;is the function&#160;<b>ApplFblInit</b>. Further details on the background and&#160;<br/>possibilities&#160;of Watchdog&#160;handling can be found in Section&#160;<a href="UserManual_FlashBootloaders.html#47">7.1</a>. &#160;<br/>
The description of the functions&#160;below is&#160;done in same order&#160;as they are called&#160;<br/>beginning with the reset.&#160;<br/>&#160;<br/>
<b>6.2.3.1 ApplFblInit&#160;</b><br/>
The&#160;<br/>
The function ApplFblInit is called after every reset. You can&#160;do your basic&#160;<br/>
ApplFblInit&#160; &#160;&#160;<br/>function&#160;<br/>
initializations, such as memory mapping, PLL&#160;setup, etc. Usually initialization of the&#160;<br/>Watchdog timer is dealt with here. (See 3.3 for more details). &#160;<br/>&#160;<br/>
The&#160;function&#160;<br/>ApplFblCanP<br/>aramInit&#160;<br/>
<b>6.2.3.2 ApplFblCanParamInit&#160;<br/></b><a href="UserManual_FlashBootloaders.html#50">Callback function for multi ECU support. See&#160;7.2</a>.&#160;<br/>&#160;<br/>
The&#160;function&#160;<br/>ApplFblIs&#160;<br/>
<b>6.2.3.3 ApplFblIsValidApp&#160;</b><br/>
ValidApp<br/>
Callback function to check the validity of the application.<a href="UserManual_FlashBootloaders.html#19">&#160;See&#160;4.4.2</a>.&#160;<br/>&#160;<br/>
The&#160;function&#160;<br/>ApplFblStartup&#160;<br/>
<b>6.2.3.4 ApplFblStartup&#160;<br/></b>This function is called after&#160;<b>ApplFblInit</b>&#160;if no valid application was found or the&#160;<br/>Bootloader was started by the application (reprogramming request). Use this&#160;<br/>function to do initializations, which are needed by the application and the&#160;<br/>Bootloader. This is useful if you want to&#160;initialize hardware or software explicitly&#160;<br/>used for the Bootloader.&#160;<br/>&#160;<br/>
<b>6.2.3.5 ApplFblWDInit&#160;</b><br/>
Be&#160;sure&#160;to&#160;<br/>only&#160;initialize&#160;<br/>
The function ApplFblWDInit is only called&#160;if&#160;control remains in&#160;the Flash Bootloader&#160;<br/>
the watchdog&#160;<br/>timer in&#160;one&#160;<br/>
after a reset.&#160;<br/>
location&#160;<br/>
You can also initialize your Watchdog here&#160;if you have not done this already in the&#160;<br/>function&#160;<b>ApplFblInit</b><a href="UserManual_FlashBootloaders.html#39">&#160;(see&#160;6.2.3.1</a>) (for more details about&#160;the watchdog see 3.1).&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>void ApplFblWDInit(void)&#160;<br/>
{&#160;<br/>
Your code for initializing your Watchdog can go here, or nothing, if you either&#160;<br/>
won't be using it or you want to initialize it somewhere else.&#160;<br/>
}&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=40></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-40_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-40_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-40_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
39&#160;/ 56<br/>
<b>6.2.3.6 ApplTrcvrNormalMode&#160;</b><br/>
The&#160;function&#160;<br/>
The name of this function is self-explanatory. To send CAN messages it&#160;is first&#160;<br/>
ApplTrcvNor<br/>malMode&#160;<br/>
necessary to setup the transceiver. This can be done here.&#160;<br/>&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>void ApplTrcvrNormalMode(void)&#160;<br/>
{&#160;<br/>
&#160;<br/>
&#160; DDRCAN &#160;= 0xff;&#160;&#160;/* set the port direction */&#160;<br/>
&#160;&#160;PORTCAN = 0x30;&#160;&#160;/* set the port */&#160;<br/>
&#160;<br/>
}&#160;<br/>
&#160;<br/>
<b>6.2.3.7&#160;</b><br/>
<b>ApplFblSecuritySeed&#160;/ Key&#160;</b><br/>
&#160;<br/><b>Refer to your OEM-specific Documentation&#160;[#oem_sec]&#160;to get the necessary&#160;<br/>information</b>.&#160;<br/>&#160;<br/>
<b>6.2.3.8 ApplFblSetVfp&#160;</b><br/>
<b>&#160;</b><br/>
The function&#160;<br/>ApplFblSetVfp&#160;<br/>
Whether you need to configure this function or not&#160;depends&#160;on your hardware&#160;<br/>setup (some flash memories require external programming voltage to erase and&#160;<br/>program). If you have to turn on the voltage for flash programming, you can do that&#160;<br/>in this function.&#160;<br/>Normally you would set an I/O port&#160;to enable an external flash supply.&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>void ApplFblSetVfp(void)&#160;<br/>
{&#160;<br/>
for example:&#160;<br/>
&#160;&#160;PORTA &amp;= ~0x01;&#160;<br/>
}&#160;<br/>
&#160;<br/>
The&#160;function&#160;<br/>
<b>6.2.3.9 ApplFblInvalidateApp&#160;</b><br/>
ApplFblInvalid<br/>ateApp&#160;<br/>
Callback function to invalidate an application.<a href="UserManual_FlashBootloaders.html#19">&#160;See&#160;4.4.2</a>.&#160;<br/>&#160;<br/><b>6.2.3.10 ApplFblFlashBlockNotFound&#160;</b><br/>
The&#160;function&#160;<br/>
This function is called if&#160;a TransferData has been received but no address region&#160;<br/>
ApplFblFlash&#160;<br/>
was found in the defined FlashBlocks. It also&#160;allows&#160;you to support out of main&#160;<br/>
BlockNotFoun<br/>
memory downloads (for example:&#160;Additional Flash or EEPROM).&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=41></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-41_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-41_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-41_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-41_4.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
40&#160;/ 56<br/>
<b>6.2.3.11 ApplFblValidateApp&#160;</b><br/>
The&#160;function&#160;<br/>ApplFblValida<br/>
Callback function to validate an applic<a href="UserManual_FlashBootloaders.html#19">ation. See&#160;4.4.2</a>.&#160;<br/>
teApp&#160;<br/>
&#160;<br/>
<b>6.2.3.12 ApplFblResetVfp&#160;</b><br/>
The&#160;function&#160;<br/>ApplFblReset<br/>
The function ApplFblResetVfp&#160;is the counterpart of the&#160;function ApplFblSetVfp.&#160;<br/>
Vfp&#160;<br/>
This function allows you to&#160;turn off the programming voltage.&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>void ApplFblResetVfp(void)&#160;<br/>
{&#160;<br/>
For example:&#160;<br/>
&#160; PORTA |= 0x01;&#160;<br/>
}&#160;<br/>
&#160;<br/>
The&#160;function&#160;<br/>ApplFblWDLong&#160;<br/>
<b>6.2.3.13 ApplFblWDLong&#160;<br/></b>Adjusts watchdog timing for application if necessary.&#160;<br/>This function is called immediately after&#160;flashing, before branching from the Flash&#160;<br/>Bootloader into your application.&#160;For&#160;watchdogs with changeable timer intervals,&#160;<br/>switching to the other interval can be done here. &#160;<br/>
If you want to use a hardware reset for the transition, implement an infinite loop in this&#160;<br/>function.&#160;The Watchdog&#160;timer will expire and create the desired reset. &#160;<br/>
<b>Example:&#160;</b><br/>
&#160;<br/>void ApplFblWDLong(void)&#160;<br/>
{&#160;<br/>
&#160;Here is the place for&#160;your infinite loop&#160;or&#160;your changeover. If&#160;you do not need&#160;<br/>
this function, simply leave this blank.&#160;<br/>
}&#160;<br/>
&#160;<br/>Starting the flash process from the application, the following call back functions&#160;<br/>have to be adapted.&#160;<br/>
<b>6.2.3.14 ApplFblWDShort&#160;</b><br/>
The function&#160;<br/>ApplFblWDShort&#160;<br/>
The function ApplFblWDShort is called during the transition from the application&#160;<br/>into the Flash Bootloader. With it you can again re-adjust&#160;the watchdog timer&#160;<br/>interval. &#160;<br/>If you have a window watchdog, you can synchronize the watchdog here.&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>void ApplFblWDShort(void)&#160;<br/>
{&#160;<br/>
&#160;Here is the place for your changeover. If you do not need this function, simply&#160;<br/>
leave this blank.&#160;<br/>
}&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=42></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-42_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-42_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
41&#160;/ 56<br/>
<b>6.2.3.15 ApplFblWDTrigger&#160;</b><br/>
<b>&#160;</b><br/>
The&#160;function&#160;<br/>ApplFblWDTrigge<br/>r&#160;<br/>
If you enable the watchdog timer, then you&#160;must refresh it in the function&#160;<br/>ApplFblWDTrigger. An example of how this is done follows.&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>void ApplFblWDTrigger(void)&#160;<br/>
{&#160;<br/>
/* You must operate your Watchdog here. The code could look like this: */&#160;<br/>
&#160; PORTB &#160;|= &#160; &#160;cWatchdogPin;&#160;<br/>
&#160; PORTB &#160;&amp;= &#160; ~cWatchdogPin;&#160;<br/>
}&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=43></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-43_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-43_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
42&#160;/ 56<br/>
<b>6.2.4&#160;&#160;Fbl_vect.c / Applvect.c(.h)&#160;- The Interrupt Vector Tables&#160;<br/></b>There are several files provided&#160;for the interrupt vector tables. Fbl_vect.c (.h) is the&#160;<br/>vector table for the Bootloader, Applvect.c (.h) for the application.&#160;<br/>
On some hardware platforms the vector table may also be implemented&#160;in assembly&#160;<br/>language.&#160;The files names will have corresponding extensions in this&#160;case.&#160;<br/>
For the integration of the Bootloader you have to compile&#160;and link the provided files&#160;<br/>fbl_vect&#160;<b>and</b>&#160;applvect.c / applvect.h to your Bootloader files. To adjust the location&#160;<br/>of the application vector table, just&#160;link&#160;the APPLVECT segment to the desired&#160;<br/>memory location. The location of the application vector table must be fixed and the&#160;<br/>same for the bootloader as&#160;well as the application. &#160;<br/>
<b>Memory&#160;Map</b><br/>
<b>y<br/>r &#160;<br/>&#160;o &#160;</b><br/>
<b>&#160;&#160;m&#160;<br/>&#160;&#160;e<br/>&#160;&#160;M</b><br/>
<b>&#160;&#160;h &#160;<br/>&#160;&#160;s<br/>&#160;l&#160; a<br/>F&#160;</b><br/>
<b>Applvect.c</b><br/>
<b>[Application]</b><br/>
<b>&#160;&#160;M<br/>A<br/>R &#160;</b><br/>
<b>y<br/>r&#160;<br/>o&#160;</b><br/>
<b>Bootloader</b><br/>
Transport&#160;Protocol,<br/>
<b>&#160;e m&#160;</b><br/>
KWP2000-Services,<br/>
CAN Driver<br/>
<b>&#160;&#160;M</b><br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
Reset<br/>
<b>s h</b><br/>
<b>fbl_vect.c</b><br/>
<b>&#160;l&#160;a&#160;<br/>F</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 6-3&#160;&#160;Situation Directly After The Programming Of&#160;The Bootloader Together With The Dummy&#160;Application&#160;<br/>
Vector Table&#160;<br/>
The provided application vector table is just a dummy&#160;table to provide the&#160;<br/>Bootloader with the memory&#160;address of the application vector table.&#160;All vectors&#160;<br/>within the applvect.c point to the&#160;startup code of the Bootloader. &#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=44></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-44_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-44_2.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
43&#160;/ 56<br/>
If you now flash your application for the first time, this dummy application interrupt&#160;<br/>vector table will be overwritten with your application vector&#160;table. Make sure that&#160;<br/>the memory location is exactly the same. &#160;<br/>
It is recommended to use the applvect.c file from the delivered example application&#160;<br/>as basis for&#160;your application vector table and insert the name of your interrupt service&#160;<br/>functions at&#160;the appropriate locations in the file.&#160;<br/>
. &#160;<br/><b>Refer To hardware-specific Documentation&#160;[#hw_intvect].&#160;<br/></b>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#32">Back</a>&#160;to 8 Steps Bootloader&#160;integration overview&#160;<br/>&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=45></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-45_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-45_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-45_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-45_4.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-45_5.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
44&#160;/ 56<br/>
<b>6.3&#160;</b><br/>
<b>Bootloader STEP 3 Now&#160;compile the Flash Bootloader&#160;</b><br/>
Now all the files&#160;and functions have been&#160;adapted. Call the file&#160;make.exe again to&#160;<br/>compile them. The result is a file XYZ.hex, that is, the Flash Bootloader in hex&#160;<br/>format.&#160;<br/>&#160;<br/>
<b>6.4&#160;</b><br/>
<b>Bootloader STEP 4 Transfer the Bootloader to the target hardware&#160;</b><br/>
In order to test your result, you now have&#160;to load the Bootloader&#160;hex file onto your&#160;<br/>target platform.&#160;<br/>&#160;<br/>
<b>6.5&#160;</b><br/>
<b>Bootloader STEP 5 Use the Flash&#160;Tool to Test the Bootloader&#160;</b><br/>
Open the Flash Tool (for installation&#160;and how to use it see the FlashTool&#160;<br/>Documentation). Go to&#160;<b>Options\Paths</b>&#160;and set the paths.&#160;<br/>
Before you&#160;start the download, be sure that you have a CAN connection to your ECU. &#160;<br/>
&#160;<br/>Press the Start-Button to start the Flasher.&#160;The Flash Tool will now cyclically send&#160;<br/>the CAN Flash messages. &#160;<br/>&#160;<br/>
<b>6.6&#160;</b><br/>
<b>Bootloader STEP 6 – Test&#160;the flashing after a reset &#160;</b><br/>
If you do a reset now, the ECU, triggered by&#160;the Flash Tool's cyclically sent CAN&#160;<br/>messages, should start the flash process.&#160;You can see the flash process&#160;in the&#160;<br/>window of the Flash Tool. &#160;<br/>Did it work properly? &#160;If so, the&#160;main work is already behind you.&#160;<br/>
<b>If not</b>: check the baud rate, the CAN connection and the hardware initializations.&#160;<br/>
&#160;<br/>&#160;<br/>
<a href="UserManual_FlashBootloaders.html#32">Back</a>&#160;to 8 Steps Bootloader&#160;integration overview&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=46></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-46_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-46_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-46_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-46_4.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
45&#160;/ 56<br/>
<b>6.7&#160;</b><br/>
<b>Bootloader Step 7 – Make your&#160;application ready for the transition to&#160;</b><br/>
<b>the Bootloader&#160;<br/></b>Another possible way to start the Flash Bootloader is&#160;from the application. A&#160;<br/>common way of starting the bootloader from&#160;the application is&#160;by receiving a&#160;<br/>certain diagnostic service or because by a special-purpose CAN message.&#160;<br/>As you see in the&#160;<a href="UserManual_FlashBootloaders.html#38">Figure 6-2</a>&#160;the transition from the application to the Bootloader is&#160;<br/>done via the function FblStart. The parameter of this function is a hardware&#160;<br/>dependent structure that&#160;contains e.g. the baud rate, the bit timing, CAN-ID, etc. &#160;<br/>
Some OEMs realize the&#160;transition from the application to the&#160;Bootloader via a reset. &#160;<br/>
&#160;<br/><b>Refer to your OEM-specific Documentation&#160;[#oem_trans]&#160;to get the necessary&#160;<br/>information on the correct sequence&#160;of events to switch from your&#160;<br/>application to the Bootloader</b>.&#160;<br/>&#160;<br/>
<b>6.8&#160;</b><br/>
<b>Bootloader Step 8 – Start Bootloader from your application&#160;</b><br/>
Compile your application with the jump to&#160;bootloader supported as&#160;described in the&#160;<br/>previous step. Then load it on your target hardware using the flash tool. Now&#160;<br/>flashing works in cooperation with the flash tool. The final two steps deal with the&#160;<br/>preparation of the application hex file for download via an OEM tester.&#160;<br/>&#160;<br/>&#160;<br/>Ok? &#160;It is working? &#160;<br/>
If not, go ba<a href="UserManual_FlashBootloaders.html#30">ck to the&#160;STEP 3</a><a href="UserManual_FlashBootloaders.html#31">, or continue with the&#160;STEP 4</a>&#160;if it works.&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=47></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-47_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
46&#160;/ 56<br/>
<b>7 Background&#160;</b><br/>
<b>Information&#160;</b><br/>
<b>7.1 The&#160;</b><br/>
<b>Watchdog&#160;</b><br/>
The Bootloader needs to trigger an on-chip or&#160;external watchdog while&#160;<br/>downloading the application.&#160;<br/>Refreshing the watchdog is&#160;hardware/application specific and therefore must be&#160;<br/>implemented by the user. There are two watchdog functions:&#160;<br/>
&#160;&#160;<b>FblLookForWatchdog:</b>&#160;Internal function to generate the time base for&#160;<br/>
triggering the watchdog (must not be changed by the user)&#160;<br/>
&#160;&#160;<b>ApplFblWDTrigger:</b>&#160;Hardware/application&#160;specific call-back function for&#160;<br/>
refreshing the watchdog&#160;<br/>
&#160;<br/>
<b>Memo</b><br/>
<b>Mem&#160;ry&#160;Ma</b><br/>
<b>&#160;M&#160;p</b><br/>
<b>y<br/>&#160; r &#160;</b><br/>
Application<br/>
<b>&#160;m &#160;o<br/>&#160;&#160;e&#160;<br/>&#160;M<br/>&#160; &#160;</b><br/>
<b>&#160;&#160;l &#160;a &#160;s &#160;h<br/>F</b><br/>
<b>Interrupt&#160;Vector&#160;Table</b><br/>
<b>[Application]</b><br/>
<b>Validation&#160;Area</b><br/>
<b>FblLookForWatchdog</b><br/>
<b>&#160; M</b><br/>
<b>ApplFblWDTrigg</b><br/>
<b>DTri</b><br/>
<b>e</b><br/>
<b>gg&#160;r</b><br/>
copy&#160;before<br/>
<b>A<br/>R &#160;</b><br/>
<b>Flash Driver</b><br/>
flashing<br/>
<b>FblLookForWatchdog</b><br/>
<b>y<br/>r&#160;</b><br/>
<b>ApplFblWDTrigg</b><br/>
<b>DTri</b><br/>
<b>e</b><br/>
<b>gg&#160;r</b><br/>
<b>o&#160;</b><br/>
<b>Bootloader</b><br/>
<b>&#160;m&#160;<br/>&#160;e</b><br/>
Transport Protocol,<br/>
KWP2000-Services,<br/>
<b>&#160; M</b><br/>
CAN Driver<br/>
<b>IsValid</b>⏐<b>Invalidate</b>⏐<b>Validate</b><br/>
<b>Interrupt Vector&#160;Table</b><br/>
<b>&#160;l a s h<br/>F</b><br/>
<b>[FBL]</b><br/>
&#160;<br/>
Figure 7-1&#160;&#160;Memory&#160;Layout&#160;Of The Watchdog Trigger Functions&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=48></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-48_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
47&#160;/ 56<br/>
Both functions are copied into RAM while programming the Flash, as it’s not&#160;<br/>possible on most MCUs to execute an application from Flash&#160;while reprogramming&#160;<br/>
The watchdog&#160;<br/>
parts of the Flash. Copying the functions&#160;into RAM is either accomplished by a&#160;<br/>
trigger&#160;functions&#160;<br/>
copy function of the Bootloader (<b>FblCopyWatchdog</b>) or by the startup function. In&#160;<br/>
have&#160;to&#160;be&#160;<br/>relocatable!&#160;<br/>
the first case, the watchdog trigger functions must be re-locatable (not really)!&#160;<br/>
&#160;<br/>
<a href="UserManual_FlashBootloaders.html#49">You are already familiar with&#160;Figure 7-2. The main attention is</a>&#160;now on those&#160;<br/>functions in which handling&#160;or manipulating the watchdog timer can take place.&#160;<br/>&#160;&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=49></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-49_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-49_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-49_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
48&#160;/ 56<br/>
<b>Application</b><br/>
<b>FblStart</b><br/>
<b>Bootloader</b><br/>
<b>ApplFblWDShort</b><br/>
yes<br/>
<b>ApplFblIsValidApp</b><br/>
<b>ApplFblInit</b><br/>
<b>Reset</b><br/>
OEM specific<br/>
<b>Optional: initialize&#160;WD&#160;</b><br/>
no<br/>
wait&#160;time<br/>
<b>and&#160;set trigger time&#160;*</b><br/>
<b>ApplFblStartup<br/>ApplFblWDInit</b><br/>
<b>Optional: initialize&#160;WD</b><br/>
<b>and&#160;set trigger&#160;time&#160;*</b><br/>
<b>ApplFblCanParamInit</b><br/>
<b>ApplTrcvrNormalMode<br/>[End of Initialization Phase]</b><br/>
<b>Wait for&#160;Diagnostic Service&#160;to&#160;start Flash</b><br/>
<b>ApplFblWDTrigger</b><br/>
<b>ApplFblSecuritySeed</b><br/>
<b>[Queried&#160;via KWP2000]</b><br/>
<b>ApplFblSecurityKey</b><br/>
<b>[Queried&#160;via KWP2000]</b><br/>
Download&#160;of&#160;flash algorithms<br/>
<b>ApplFblSetVfp</b><br/>
<b>ApplFblInvalidateApp</b><br/>
<b>Erase&#160;Flash&#160;Memory<br/>ApplFblSectorErase&#160;(opt.)</b><br/>
<b>Download&#160;Application&#160;Data</b><br/>
<b>ApplFblFlashBlockNotFound</b><br/>
<b>ApplFblValidateApp</b><br/>
<b>ApplFblResetVfp</b><br/>
<b>ApplFblWDLong</b><br/>
<b>Dependent on&#160;OEM</b><br/>
&#160;<br/>
Figure 7-2&#160;&#160;Functions For&#160;Manipulating The&#160;Watchdog&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=50></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-50_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-50_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-50_3.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
49&#160;/ 56<br/>
<b>7.1.1&#160;&#160;Initializing The Watchdog&#160;</b><br/>
With some&#160;<br/>watchdogs&#160;<br/>
You can initialize the watchdog&#160;in one of two different places: either in the function&#160;<br/>
double&#160;<br/>
<b>ApplFblInit</b>&#160;or in the function&#160;<b>ApplFblWDInit</b>. If you want to enable the watchdog&#160;<br/>
initialization&#160;can&#160;<br/>lead&#160;to&#160;a&#160;reset.&#160;<br/>
within the Stay-In-Boot time&#160;where the bootloader waits 50ms (default) to receive&#160;<br/>the CAN message, then you have to do the initialization in&#160;the function&#160;<b>ApplFblInit</b>.&#160;<br/>In that case the function&#160;<b>ApplFblWDInit</b>&#160;MUST remain empty. &#160;<br/>On the other hand it is also true, of course, that if you initialize&#160;in the function&#160;<br/><b>ApplFblWDInit</b>&#160;you must not initialize in the function&#160;<b>ApplFblInit</b>.&#160;<br/>The user should initialize the watchdog since this is hardware dependent. To find&#160;<br/>
Use WDTimer&#160;[in&#160;<br/>ms]&#160;to&#160;easily&#160;set&#160;<br/>
your register settings to initialize the&#160;watchdog, please refer to the controller&#160;<br/>
your Watchdog&#160;<br/>
manual.&#160;<br/>
operating times.&#160;<br/>
You can however use&#160;<b>WDTimer&#160;</b>for triggering. If you set&#160;<b>WDTimer</b>&#160;to&#160;<b>0</b>, then the&#160;<br/>Watchdog will timeout&#160;immediately. The unit&#160;for&#160;<b>WDTimer</b>&#160;is ms. The Watchdog is&#160;<br/>operated via the function ApplFblWDTrigger, which you have already adapted to&#160;<br/>your needs<a href="UserManual_FlashBootloaders.html#39">&#160;(see&#160;6.2.3.5</a><a href="UserManual_FlashBootloaders.html#42">&#160;and&#160;6.2.3.15</a>).&#160;<br/><b>Example:&#160;</b><br/>
&#160;<br/>
/* Initializing the WD, hardware-specific */&#160;<br/>
WDTimer = 250/*ms*/; &#160;/* in this way the Watchdog is triggered after 250ms.&#160;<br/>&#160;<br/>
Changing the value &#160;of WDTimer will only influence the time of refreshing the&#160;<br/>watchdog for that particular cycle.&#160;The watchdog refresh rate will then&#160;be reinitialized&#160;<br/>to the value set in fbl_cfg.h as soon&#160;as the watchdog is serviced. (see 2.4.2).&#160;<br/>
If your watchdog is a window watchdog, or&#160;at least supports different monitoring&#160;<br/>windows and you want to use these as well, then you can use both of the functions&#160;<br/><b>ApplFblWDLong</b>&#160;and&#160;<b>ApplFblWDShort</b>&#160;for toggling the monitoring times. &#160;<br/>Refer to the hardware-specific documentation&#160;<b>[#oem_wd]</b>&#160;for more information about&#160;<br/>the watchdog.&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Multiple ECU Support&#160;</b><br/>
The Flash Bootloader supports multiple&#160;ECUs (When similar ECUs are used&#160;<br/>multiple times in a vehicle, and their CAN identifiers are configurable).&#160;<br/>This feature can be activated by setting the &#160;<br/>#define ‘FBL_ENABLE_MULTIPLE_NODES’ in&#160;the file fbl_cfg.h or via the&#160;<br/>Generation Tool depending on your OEM.&#160;<br/><b>&#160;<br/>Refer to your OEM-specific Documentation&#160;[#oem_multi]&#160;to get the necessary&#160;<br/>information</b>.&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=51></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-51_1.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-51_2.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-51_3.png"/><br/>
<img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-51_4.jpg"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
50&#160;/ 56<br/>
If multiple ECUs&#160;are supported,&#160;the FBL will call the function&#160;<br/><b>ApplFblCanParamInit()</b>, where the user has to decide which set of CAN identifiers&#160;<br/>are used. Some OEMs set additional information, e.g. like identification of the ECU.&#160;<br/>
<b>7.3 Validation&#160;</b><br/>
<b>Ok&#160;</b><br/>
<b>–&#160;</b><br/>
<b>Application Faulty&#160;</b><br/>
<a href="UserManual_FlashBootloaders.html#18">As mentioned in the earlier chapter&#160;4.3.1</a>&#160;the validity check may result in a positive&#160;<br/>response and sign the application valid, even if&#160;the application itself is faulty. In that&#160;<br/>case every reset will lead&#160;to an application that does not work properly (for&#160;<br/>example: The CAN communication of the&#160;application does not work anymore).&#160;<br/>
The validation process does not recognize the&#160;problems in the application (e.g. a&#160;<br/>damaged byte in flash, etc.).&#160;<br/>
&#160;<br/>How can you flash an error free&#160;application in that case? &#160;<br/>To do this it must be possible to react&#160;on a CAN message during the transition from&#160;<br/>a reset to the application. Using the&#160;switch FBL_ENABLE_STAY_IN_BOOT in the&#160;<br/>fbl_cfg.h<a href="UserManual_FlashBootloaders.html#35">&#160;file (see&#160;6.2.1</a>) you get the following modified function calling sequence.&#160;<br/>
&#160;<br/>
<b>Application</b><br/>
<b>FblStart</b><br/>
<b>Bootloader</b><br/>
<b>ApplFblWDShort</b><br/>
Timer&#160;expired<br/>
<b>ApplFblIsValidApp</b><br/>
<b>OEM&#160;specific</b><br/>
yes<br/>
<b>ApplFblInit</b><br/>
<b>wait&#160;time</b><br/>
<b>Reset</b><br/>
<b>Optional:&#160;initialize</b><br/>
no<br/>
<b>WD&#160;and set trigger&#160;</b><br/>
ForceBootMode<br/>
<b>time&#160;*</b><br/>
Message&#160;received<br/>
<b>ApplFblStartup</b><br/>
<b>Stay&#160;in Boot&#160;Mode</b><br/>
&#160;<br/>
Figure 7-3&#160;&#160;Modified Function Calling Sequence&#160;<br/>
After the application is checked to be valid a timer is started.&#160;The FBL waits a&#160;<br/>default time (refer&#160;to&#160;OEM-Specific Documentation&#160;<b>[#oem_time]</b>&#160;) to&#160;receive a CAN&#160;<br/>message (ForceBootMode Message) as a trigger to stay in the boot mode. Now a&#160;<br/>new flash process can be triggered.&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=52></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-52_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
51&#160;/ 56<br/>
If the timer expires with no receive message the application will be executed. &#160;<br/>With this mechanism it&#160;is now possible to&#160;flash an application, which had been set&#160;<br/>valid erroneously.&#160;<br/>The disadvantage is that the startup time will be longer (watchdog).&#160;<br/>
<b>7.4 FlashSegmentSize&#160;<br/></b>The Flash Segment Size is a configurable parameter in the Flash Tool.&#160;<br/>
FlashSegment-<br/>
When you are modifying the&#160;<b>FlashSegmentSize</b>, enter the smallest segment of&#160;<br/>
Size&#160;gives the&#160;<br/>minimal&#160;size&#160;of&#160;<br/>
flash memory that can be programmed&#160;by the Flash Bootloader (hardware&#160;<br/>
the&#160;data&#160;in&#160;bytes&#160;<br/>which&#160;the&#160;<br/>
dependent information&#160;<b>[#hw_size]</b>). &#160;<br/>
CANflasher&#160;can&#160;<br/>write&#160;to&#160;at&#160;once.&#160;<br/>
In other words, a block must start at&#160;the beginning of a flash segment, for Flash&#160;<br/>
Thus&#160;at&#160;least&#160;this&#160;<br/>much&#160;data&#160;must&#160;<br/>
Bootloader<i>&#160;</i>to write to it. This specification depends on your hardware. The Flash&#160;<br/>
be&#160;written&#160;<br/>
Tool needs&#160;this information in&#160;order to optimize the write process. The tool must&#160;<br/>
simultaneously.&#160;<br/>The size&#160;of&#160;<br/>
optimize exactly if area boundaries do not&#160;fall on flash block boundaries.&#160;<br/>
FlashSegment-<br/>Size&#160;depends&#160;on&#160;<br/>your hardware.<br/>
Enter the value for your Segment Size in&#160;the flash tool in the Flash File window.&#160;<br/>(See FlashTool Documentation)&#160;<br/>
<b>7.4.1&#160;&#160;Why&#160;Does The Tool Have&#160;To Know&#160;This Block Length?&#160;<br/></b>In the following example let us take a Flash Bootloader that can write a minimum of&#160;<br/>64 bytes; this corresponds to 40 in hexadecimal representation. &#160;<br/>
0<br/>
40<br/>
80<br/>
C0<br/>
100<br/>
0<br/>
40<br/>
80<br/>
C0<br/>
100<br/>
0<br/>
40<br/>
80<br/>
C0<br/>
100<br/>
Area of&#160;Application Data<br/>
Dummy Values<br/>
&#160;<br/>
Figure 7-4&#160;&#160;Segmenting During Flashing&#160;<br/>
In the first example the data area to be&#160;written to (red) is distributed over 3&#160;<br/>consecutive segments and does&#160;not start precisely at the beginning of a segment.&#160;<br/>The Flash Bootloader then fills this gap with&#160;dummy values (gray) and in this way&#160;a&#160;<br/>segment consisting of&#160;3x64 bytes&#160;can be written to memory at once. The gap at the&#160;<br/>end will be filled with the values that&#160;are already in the flash memory.&#160;<br/>In the second example two data segments lay one after the other, but there is a&#160;<br/>gap between them. To prevent&#160;the Flash Bootloader from&#160;having to write to&#160;the&#160;<br/>segment from 0x80 to 0xC0 twice, it also fills up the gap here and the region up to&#160;<br/>the next segment boundary with dummy values, and now a segment with the&#160;<br/>length of 4X64 bytes&#160;can be written to at once. The gap at&#160;the end will be filled with&#160;<br/>the values that are already in the flash memory.&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=53></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-53_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
52&#160;/ 56<br/>
In the third example two data segments have to be written&#160;to here, too, but the gap&#160;<br/>between them is greater than&#160;one segment. In this case,&#160;in order to not have to&#160;<br/>write to a completely&#160;unused segment, the Flash Bootloader now divides&#160;up the&#160;<br/>task differently. For this reason the&#160;segment between 0x40&#160;and 0x80 remains&#160;<br/>empty here.&#160;<br/>
<b>7.5&#160;</b><br/>
<b>Frequently&#160;Asked Questions&#160;</b><br/>
A list of frequently encountered problems is provided here to facilitate&#160;<br/>troubleshooting.&#160;<br/>&#160;&#160;<br/>
<b>7.5.1 Bootloader&#160;Crashes&#160;</b><br/>
&#160;<br/>
<b>Q:&#160;</b><br/>
The Bootloader simply&#160;crashes after reset&#160;<br/>
<b>A:&#160;</b><br/>
Check if the Bootloader accidentally started the application – check&#160;<br/>validity information by setting a breakpoint at&#160;<b>ApplFblIsValidApp</b>.&#160;<br/>
Also verify that the Bootloader and application locate the Application&#160;<br/>Vector Table to the same address.&#160;<br/>
&#160;<br/><b>Q:&#160;</b><br/>
I can start the download but the software crashes when the Flash is&#160;<br/>erased&#160;<br/>
<b>A:&#160;</b><br/>
The Bootloader may crash for several reasons:&#160;<br/>1.&#160;&#160;The Flash Driver was not correctly&#160;copied from ROM to RAM. Check if&#160;<br/>
the byte-array (<b>flashCode</b>) for the Flash Driver is large enough to hold&#160;<br/>it.&#160;<br/>
1.&#160;&#160;Check your watchdog routine. Check if the byte-array for the watchdog&#160;<br/>
function (<b>WDTriggerBuffer</b>) is large enough to hold the watchdog&#160;<br/>function.&#160;<br/>
2.&#160;&#160;Check that the watchdog trigger function is relocatable.&#160;<br/>
3. Check&#160;the&#160;<b>FlashBlock</b>&#160;structure in the “fbl_apfb.c” file. Make sure that&#160;<br/>
the memory area occupied by the Bootloader is excluded from the&#160;<br/><b>FlashBlock</b>&#160;structure.&#160;<br/>
&#160;<br/><b>Q:&#160;</b><br/>
The Flash is erased, but the Bootloader&#160;crashes before the application is&#160;<br/>downloaded.&#160;<br/>
<b>A:&#160;</b><br/>
Check the&#160;<b>FlashBlock</b>&#160;structure in the&#160;“fbl_apfb.c” file. Make sure that the&#160;<br/>memory area occupied by the Bootloader is excluded from the&#160;<br/><b>FlashBlock</b>&#160;structure.&#160;<br/>
&#160;<br/><b>Q:&#160;</b><br/>
I can start the Bootloader software but&#160;after some time, the Bootloader&#160;<br/>crashes&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=54></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-54_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
53&#160;/ 56<br/>
<b>A:&#160;</b><br/>
4.&#160;&#160;Check your watchdog routine. Check if the byte-array for the watchdog&#160;<br/>
function (<b>WDTriggerBuffer</b>) is large enough to hold the watchdog&#160;<br/>function.&#160;<br/>
5.&#160;&#160;Check that the watchdog trigger function is relocatable.&#160;<br/>
Disable watchdog for testing purpose.&#160;<br/>
&#160;<br/><b>Q:&#160;</b><br/>
The Bootloader crashes when programming a specific Logical Block&#160;<br/>
<b>A:&#160;</b><br/>
Check the&#160;<b>FlashBlock</b>&#160;structure in the&#160;“fbl_apfb.c” file. Make sure that the&#160;<br/>memory area occupied by the Bootloader is excluded from the&#160;<br/><b>FlashBlock</b>&#160;structure. Also make sure to exclude non-Flash (RAM,&#160;<br/>Registers, EEPROM)&#160;areas from the&#160;<b>FlashBlock</b>&#160;structure.&#160;<br/>
&#160;<br/><b>Q:&#160;</b><br/>
The Bootloader is cyclically restarted&#160;<br/>
<b>A:&#160;</b><br/>
1.&#160;&#160;Check your watchdog routine. Check if the hardware watchdog is&#160;<br/>
serviced correctly. Disable watchdog for testing purpose.&#160;<br/>
2. Maybe&#160;the&#160;application was started and didn’t trigger the watchdog.&#160;<br/>
Check validity information.&#160;<br/>
&#160;<br/>&#160;<br/><b>Q:&#160;</b><br/>
I can start the download but sometimes, the transfer is aborted with a&#160;<br/>timeout.&#160;<br/>
<b>A:&#160;</b><br/>
1.&#160;&#160;Check the watchdog timeout and watchdog trigger&#160;<br/>
2.&#160;&#160;Check the setting of the FBL_DIAG_TIME_P3MAX and the diagnostic&#160;<br/>
response timeout of your Tester/the Flash programming tool. The&#160;<br/>Bootloader must transmit cyclic “Response Pending” messages on the&#160;<br/>bus. You may check this with a CANoe/CANalyzer tool.&#160;<br/>
&#160;<br/>
<b>7.5.2&#160;&#160;Application Is Not Started&#160;</b><br/>
&#160;<br/>
<b>Q:&#160;</b><br/>
I can download the application,&#160;but after a reset the Bootloader is still&#160;<br/>active&#160;<br/>
<b>A:&#160;</b><br/>
There could be different reasons for this:&#160;<br/>
&#160;&#160;Check the validity information. Set a breakpoint in&#160;<b>ApplFblIsValidApp</b>&#160;<br/>
and verify it. Did you download all necessary parts of the application? &#160;&#160;<br/>
&#160;<br/><b>Q:&#160;</b><br/>
When I download the application for the&#160;first time and restart the ECU, the&#160;<br/>application is running. If I reprogram the application,&#160;the Bootloader is&#160;<br/>active after&#160;reset.&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=55></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-55_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
54&#160;/ 56<br/>
<b>A:&#160;</b><br/>
Check if the reprogramming flag for the&#160;Bootloader is correctly reset after&#160;<br/>starting the Bootloader.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.5.3&#160;&#160;Bootloader Is Not Started&#160;</b><br/>
&#160;<br/>
<b>Q:&#160;</b><br/>
I can download the application and the application is running, but I cannot&#160;<br/>reprogram the application&#160;<br/>
<b>A:&#160;</b><br/>
Check if the reprogramming flag for the Bootloader is set.&#160;&#160;<br/>
&#160;<br/>
<b>7.5.4&#160;&#160;The Flash Tool's Error Codes&#160;<br/>Q:&#160;</b><br/>
How can I interpret the error codes of the Flash Tool? &#160;<br/>
<b>A:&#160;</b><br/>
Find the error code that occurred during flashing from the table in&#160;<br/>fbl_diag.h to be help narrow down&#160;your search for the cause.&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name=56></a><img src="website_Vector_Flashbootloader_RH850_Generic/content/en/docs/Doc/UserManuals/UserManual_FlashBootloader-56_1.png"/><br/>
User Manual &#160;Flash Bootloader&#160;<br/>
&#160;<br/>
2&#160;/&#160;&#160;56<br/>
<b>8 Index&#160;</b><br/>
ApplFblInit...................................................&#160;51&#160;<br/>
Flashing.......................................................&#160;13&#160;<br/>
ApplFblInvalidateApp......................&#160;19, 20, 41&#160;<br/>
FlashSegmentSize......................................&#160;53&#160;<br/>
ApplFblIsValidApp&#160;....................&#160;18, 19, 20, 40&#160;<br/>
Initializing&#160;....................................................&#160;51&#160;<br/>
ApplFblValidateApp&#160;........................&#160;19, 20, 42&#160;<br/>
interrupt vector tables..................................&#160;25&#160;<br/>
ApplFblWDInit.............................................&#160;51&#160;<br/>
Interrupt Vector Tables&#160;...............................&#160;25&#160;<br/>
Bootloader&#160;.&#160;11, 12, 13, 14, 17, 18, 19, 20, 21,&#160;<br/>
Invalidate.........................................&#160;19, 21, 22&#160;<br/>
25, 26, 33, 36, 38, 40, 42, 46, 47, 51, 53,&#160;<br/>54&#160;<br/>
IsValid&#160;.............................................&#160;19,&#160;21, 22&#160;<br/>
Call-Back Functions&#160;<br/>
KWP2000&#160;....................................................&#160;13&#160;<br/>
ApplFblStartup........................................&#160;40&#160;<br/>
Label Reference File...................................&#160;26&#160;<br/>
Call-Back Functions&#160;<br/>
Module Table&#160;..............................................&#160;23&#160;<br/>
AplFblWDTrigger....................................&#160;38&#160;<br/>
Motivation......................................................&#160;3&#160;<br/>
ApplCanParamInit&#160;..................................&#160;38&#160;<br/>
Proposal&#160;..........................................&#160;21, 22, 24&#160;<br/>
ApplFblFlashBlockNotFound..................&#160;38&#160;<br/>
RAM&#160;......................................................&#160;15, 19&#160;<br/>
ApplFblInit...............................................&#160;38&#160;<br/>
Reset...............................................&#160;18, 26, 46&#160;<br/>
ApplFblInvalidateBlock&#160;...........................&#160;38&#160;<br/>
Segment Boundary&#160;.....................................&#160;53&#160;<br/>
ApplFblIsValidApp&#160;..................................&#160;38&#160;<br/>
Step.......................................................&#160;46, 47&#160;<br/>
ApplFblResetVfp&#160;....................................&#160;38&#160;<br/>
The Interrupt&#160;Vector Table&#160;..........................&#160;44&#160;<br/>
ApplFblSetVfp&#160;........................................&#160;38&#160;<br/>
valid...........................................&#160;19, 20, 21, 22&#160;<br/>
ApplFblStartup........................................&#160;38&#160;<br/>
Validate&#160;...........................................19, 21, 22&#160;<br/>
ApplFblTask&#160;...........................................&#160;38&#160;<br/>
Validation Area..........................&#160;19, 20, 21, 22&#160;<br/>
ApplFblWDInit&#160;........................................&#160;38&#160;<br/>
validity&#160;...................................................&#160;20, 21&#160;<br/>
ApplFblWDLong&#160;.....................................&#160;38&#160;<br/>
vectortable.c................................................&#160;44&#160;<br/>
ApplFblWDShort.....................................&#160;38&#160;<br/>
Watchdog&#160;..................................&#160;40, 42, 43, 51&#160;<br/>
ApplTrcvrNormalMode&#160;...........................&#160;38&#160;<br/>
ApplFblWDTrigger&#160;..................................&#160;48&#160;<br/>
FBL_MTAB&#160;.................................................&#160;23&#160;<br/>
FblCopyWatchdog&#160;..................................&#160;49&#160;<br/>
Flash Tool&#160;...................................................&#160;11&#160;<br/>
FblLookForWatchdog&#160;.............................&#160;48&#160;<br/>
Flashcode&#160;...................................................&#160;19&#160;<br/>
Watchdogs&#160;............................................&#160;40, 49&#160;<br/>
WDTimer&#160;.....................................................&#160;51&#160;<br/>
&#160;<br/>
©2006, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
Version: 2.7&#160;<br/>
&#160;<br/>
&#160;<br/>
based of template&#160;version 2.0&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="UserManual_FlashBootloaders.html#8">1 Welcome to the Flash Bootloader User Manual&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#8">Beginners with Flash Bootloader start here ? &#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#8">1.2 For Advanced Users &#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#8">1.3 Special topics &#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#9">1.4 Documents this one refers to…&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#10">2 About This Document&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#10">2.1 How This Documentation Is Set-Up&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#11">Legend and Explanation of Symbols&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#12">Flashing – An Overall View&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#12">3.1 What Is Flashing?&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#13">3.2 What Happens During Flashing?&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#13">3.3 What Is The Flash Bootloader?&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#13">3.4 Bootloader&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#14">Flash Driver&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#15">3.6 Flash Tool&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#16">3.7 What The Flash Bootloader Does&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#16">3.8 What The Flash Bootloader NOT Does&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#17">4 Flashing – A More Detailed View&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#17">4.1 The Bootloader Is Always Started First&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#17">4.2 Flashing After A Reset&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#18">4.3 Your Application Initiates The Flashing Process&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#18">4.3.1 What might happen?&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#19">4.4 Handling of the Validation Concepts&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#19">4.4.1 Validation Area&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#19">4.4.2 Access to the Validation Area&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#19">4.4.3 ApplFblIsValidApp&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#19">4.4.4 ApplFblValidateApp&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#19">4.4.5 ApplFblInvalidateApp&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#20">4.5 Proposals For Handling The Validation Area&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#20">4.5.1 Proposal A&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#21">4.5.2 Proposal B &#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#22">4.5.2.1 The Module Table&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#23">4.5.3 Proposal C&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#24">The Interrupt Vector Tables&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#25">4.7 Label Reference File&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#26">5 &#160;FLASHING IN 5 STEPS&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#27">STEP 1 Design The Memory Layout&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#28">STEP 2 Write A Test Application&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#29">STEP 3 Integrate The Bootloader&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#30">STEP 4 Adapt Your Test Application For The Tester&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#30">STEP 5 Download Your Test Application With The Tester&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#31">&#160;Details of Bootloader Integration Step (STEP 3)&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#32">Bootloader STEP 1 – Extract the files to a folder on your pc&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#35">Bootloader STEP 2 Adjust the marked files to fit your application&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#35">6.2.1 Make… Makefile and make.exe&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#35">6.2.2 fbl_cfg.h - The Configuration File For The Flash Bootloader&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#37">6.2.3 FBL_apxx.C&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#39">6.2.3.1 ApplFblInit&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#39">6.2.3.2 ApplFblCanParamInit&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#39">6.2.3.3 ApplFblIsValidApp&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#39">6.2.3.4 ApplFblStartup&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#39">6.2.3.5 ApplFblWDInit&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#40">ApplTrcvrNormalMode&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#40">6.2.3.7 ApplFblSecuritySeed / Key&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#40">6.2.3.8 ApplFblSetVfp &#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#40">6.2.3.9 ApplFblInvalidateApp&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#40">ApplFblFlashBlockNotFound&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#41">ApplFblValidateApp&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#41">ApplFblResetVfp&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#41">6.2.3.13 ApplFblWDLong&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#41">ApplFblWDShort&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#42">ApplFblWDTrigger &#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#43">6.2.4 Fbl_vect.c / Applvect.c(.h) - The Interrupt Vector Tables&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 3 Now compile the Flash Bootloader&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 4 Transfer the Bootloader to the target hardware&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 5 Use the Flash Tool to Test the Bootloader&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#45">Bootloader STEP 6 – Test the flashing after a reset &#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#46">Bootloader Step 7 – Make your application ready for the transition to the Bootloader&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#46">Bootloader Step 8 – Start Bootloader from your application&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#47">7 Background Information&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#47">7.1 The Watchdog&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#50">7.1.1 Initializing The Watchdog&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#50">7.2 Multiple ECU Support&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#51">7.3 Validation Ok – Application Faulty&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#52">7.4 FlashSegmentSize&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#52">7.4.1 Why Does The Tool Have To Know This Block Length?&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#53">7.5 Frequently Asked Questions&#160;</a>
<ul>
<li><a href="UserManual_FlashBootloaders.html#53">7.5.1 Bootloader Crashes&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#54">7.5.2 Application Is Not Started&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#55">7.5.3 Bootloader Is Not Started&#160;</a></li>
<li><a href="UserManual_FlashBootloaders.html#55">7.5.4 The Flash Tool's Error Codes&#160;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="UserManual_FlashBootloaders.html#56">8 Index&#160;</a></li>
</ul>
</li>
</ul>
<hr/>
</body>
</html>
